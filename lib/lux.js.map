{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap cc8bed337815fe585fb1","webpack:///./src/lux.js","webpack:///./src/utils.js","webpack:///./src/actions.js","webpack:///external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}","webpack:///./src/bus.js","webpack:///external \"postal\"","webpack:///./src/mixins/index.js","webpack:///./src/mixins/store.js","webpack:///./src/mixins/actionCreator.js","webpack:///./src/mixins/actionListener.js","webpack:///./src/mixins/luxWrapper.js","webpack:///external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack:///./src/mixins/wrapperUtils.js","webpack:///./src/store.js","webpack:///./src/dispatcher.js","webpack:///external \"machina\""],"names":["global","window","_babelPolyfill","Error","publishAction","console","log","actions","customActionCreator","dispatch","dispatcher","getActionGroup","actionCreatorListener","actionCreator","actionListener","mixin","reactMixin","removeStore","Store","stores","utils","luxWrapper","ensureLuxProp","entries","context","__lux","cleanup","subscriptions","obj","indexOf","Object","keys","k","generateActionCreator","getGroupsWithAction","addToActionGroup","create","actionGroups","actionList","forEach","action","args","Array","from","arguments","publish","topic","data","actionType","actionArgs","group","pick","actionName","groups","list","push","assign","groupName","diff","difference","length","join","actionChannel","channel","storeChannel","dispatcherChannel","postal","mixins","mxn","setup","call","teardown","luxCleanup","method","undefined","store","target","gateKeeper","instance","payload","found","waitFor","splice","heardFrom","onChange","handlePreNotify","filter","listenTo","item","storeMixin","subscribe","prenotify","key","sub","split","pop","unsubscribe","storeReactMixin","componentWillMount","componentWillUnmount","actionCreatorMixin","getActions","addActionIfNotPresent","v","actionCreatorReactMixin","actionListenerMixin","handlers","handlerFn","subs","env","handler","apply","handlerKeys","namespace","Component","getState","LuxWrapper","props","initialPayload","reduce","m","s","state","createElement","propToAction","displayName","setupStoreListener","isSyntheticEvent","getDefaultActionCreator","setupActionMap","setState","e","hasOwnProperty","prototype","toString","unshift","childProp","buildActionList","ensureStoreOptions","options","getHandlerObject","listeners","changed","listener","bind","updateWaitFor","source","handlerObject","dep","addListeners","processStoreArgs","otherOpts","o","opt","clone","merge","inDispatch","hasChanged","newState","replaceState","flush","res","concat","deps","__subscription","notify","constraint","registerStore","subscription","dispose","calculateGen","lookup","gen","namespaces","calcdGen","_namespaces","depStore","thisGen","warn","buildGenerations","tree","processGeneration","generation","map","Dispatcher","initialState","actionMap","states","ready","_onEnter","actionContext","dispatching","luxAction","generations","transition","updated","_onExit","notifying","nothandled","getStoresHandling","createSubscribers","generationIndex","handle","storeMeta","actionDef","actionMeta","isThisNameSpace","meta","idx","findIndex","__subscriptions","handleActionDispatch","BehavioralFsm"],"mappings":"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","file":"lux.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"postal\"), require(\"react\"), require(\"machina\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"postal\", \"react\", \"machina\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lux\"] = factory(require(\"lodash\"), require(\"postal\"), require(\"react\"), require(\"machina\"));\n\telse\n\t\troot[\"lux\"] = factory(root[\"_\"], root[\"postal\"], root[\"React\"], root[\"machina\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_11__, __WEBPACK_EXTERNAL_MODULE_15__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap cc8bed337815fe585fb1\n **/","\n\n/* istanbul ignore next */\nif ( !( typeof global === \"undefined\" ? window : global )._babelPolyfill ) {\n\tthrow new Error( \"You must include the babel polyfill on your page before lux is loaded. See https://babeljs.io/docs/usage/polyfill/ for more details.\" );\n}\n\nimport utils from \"./utils\";\n\nimport {\n\tgetActionGroup,\n\tcustomActionCreator,\n\tactions\n} from \"./actions\";\n\nimport {\n\tmixin,\n\treactMixin,\n\tactionListener,\n\tactionCreator,\n\tactionCreatorListener,\n\tdispatch,\n\tluxWrapper\n} from \"./mixins\";\n\n/* istanbul ignore next */\nfunction publishAction( ...args ) {\n\t/* eslint-disable no-console */\n\tif ( console && typeof console.log === \"function\" ) {\n\t\tconsole.log( \"lux.publishAction has been deprecated and will be removed in future releases. Please use lux.dispatch.\" );\n\t}\n\t/* eslint-enable no-console */\n\tdispatch( ...args );\n}\n\nimport { Store, stores, removeStore } from \"./store\";\n\nimport dispatcher from \"./dispatcher\";\n\nexport default {\n\tactions,\n\tcustomActionCreator,\n\tdispatch,\n\tpublishAction,\n\tdispatcher,\n\tgetActionGroup,\n\tactionCreatorListener,\n\tactionCreator,\n\tactionListener,\n\tmixin,\n\treactMixin,\n\tremoveStore,\n\tStore,\n\tstores,\n\tutils,\n\tluxWrapper\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lux.js\n **/","\n\nexport function ensureLuxProp( context ) {\n\tconst __lux = context.__lux = ( context.__lux || {} );\n\t/*eslint-disable */\n\tconst cleanup = __lux.cleanup = ( __lux.cleanup || [] );\n\tconst subscriptions = __lux.subscriptions = ( __lux.subscriptions || {} );\n\t/*eslint-enable */\n\treturn __lux;\n}\n\nexport function *entries( obj ) {\n\tif ( [ \"object\", \"function\" ].indexOf( typeof obj ) === -1 ) {\n\t\tobj = {};\n\t}\n\tfor ( const k of Object.keys( obj ) ) {\n\t\tyield [ k, obj[ k ] ];\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/","import _ from \"lodash\";\nimport { entries } from \"./utils\";\nimport { actionChannel } from \"./bus\";\nexport const actions = Object.create( null );\nexport const actionGroups = Object.create( null );\n\nexport function generateActionCreator( actionList ) {\n\tactionList.forEach( function( action ) {\n\t\tif ( !actions[ action ] ) {\n\t\t\tactions[ action ] = function() {\n\t\t\t\tconst args = Array.from( arguments );\n\t\t\t\tactionChannel.publish( {\n\t\t\t\t\ttopic: `execute.${action}`,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tactionType: action,\n\t\t\t\t\t\tactionArgs: args\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t};\n\t\t}\n\t} );\n}\n\n// This method is deprecated, but will remain as\n// long as the print utils need it.\n/* istanbul ignore next */\nexport function getActionGroup( group ) {\n\tif ( actionGroups[ group ] ) {\n\t\treturn _.pick( actions, actionGroups[ group ] );\n\t}\n\tthrow new Error( `There is no action group named '${group}'` );\n}\n\n// This method is deprecated, but will remain as\n// long as the print utils need it.\n/* istanbul ignore next */\nexport function getGroupsWithAction( actionName ) {\n\tconst groups = [];\n\tfor ( const [ group, list ] of entries( actionGroups ) ) {\n\t\tif ( list.indexOf( actionName ) >= 0 ) {\n\t\t\tgroups.push( group );\n\t\t}\n\t}\n\treturn groups;\n}\n\nexport function customActionCreator( action ) {\n\tObject.assign( actions, action );\n}\n\n// This method is deprecated, but will remain as\n// long as the print utils need it.\n/* istanbul ignore next */\nexport function addToActionGroup( groupName, actionList ) {\n\tlet group = actionGroups[ groupName ];\n\tif ( !group ) {\n\t\tgroup = actionGroups[ groupName ] = [];\n\t}\n\tactionList = typeof actionList === \"string\" ? [ actionList ] : actionList;\n\tconst diff = _.difference( actionList, Object.keys( actions ) );\n\tif ( diff.length ) {\n\t\tthrow new Error( `The following actions do not exist: ${diff.join( \", \" )}` );\n\t}\n\tactionList.forEach( function( action ) {\n\t\tif ( group.indexOf( action ) === -1 ) {\n\t\t\tgroup.push( action );\n\t\t}\n\t} );\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}\n ** module id = 3\n ** module chunks = 0 1\n **/","import postal from \"postal\";\n\nconst actionChannel = postal.channel( \"lux.action\" );\nconst storeChannel = postal.channel( \"lux.store\" );\nconst dispatcherChannel = postal.channel( \"lux.dispatcher\" );\n\nexport {\n\tactionChannel,\n\tstoreChannel,\n\tdispatcherChannel,\n\tpostal\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bus.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"postal\"\n ** module id = 5\n ** module chunks = 0 1\n **/","// **********************************************\n// *   Generalized Mixin Behavior for non-lux   *\n// **********************************************\n\nimport { storeMixin, storeReactMixin } from \"./store\";\nimport { actionCreatorMixin, actionCreatorReactMixin, dispatch } from \"./actionCreator\";\nimport { actionListenerMixin } from \"./actionListener\";\nimport luxWrapper from \"./luxWrapper\";\n\nfunction mixin( context, ...mixins ) {\n\tif ( mixins.length === 0 ) {\n\t\tmixins = [ storeMixin, actionCreatorMixin ];\n\t}\n\n\tmixins.forEach( mxn => {\n\t\tif ( typeof mxn === \"function\" ) {\n\t\t\tmxn = mxn();\n\t\t}\n\t\tif ( mxn.mixin ) {\n\t\t\tObject.assign( context, mxn.mixin );\n\t\t}\n\t\tif ( typeof mxn.setup !== \"function\" ) {\n\t\t\tthrow new Error( \"Lux mixins should have a setup method. Did you perhaps pass your mixins ahead of your target instance?\" );\n\t\t}\n\t\tmxn.setup.call( context );\n\t\tif ( mxn.teardown ) {\n\t\t\tcontext.__lux.cleanup.push( mxn.teardown );\n\t\t}\n\t} );\n\tcontext.luxCleanup = () => {\n\t\tcontext.__lux.cleanup.forEach( method => method.call( context ) );\n\t\tcontext.__lux.cleanup = undefined;\n\t\tdelete context.__lux.cleanup;\n\t};\n\treturn context;\n}\n\nmixin.store = storeMixin;\nmixin.actionCreator = actionCreatorMixin;\nmixin.actionListener = actionListenerMixin;\n\nconst reactMixin = {\n\tactionCreator: actionCreatorReactMixin,\n\tstore: storeReactMixin\n};\n\nfunction actionListener( target ) {\n\treturn mixin( target, actionListenerMixin );\n}\n\nfunction actionCreator( target ) {\n\treturn mixin( target, actionCreatorMixin );\n}\n\nfunction actionCreatorListener( target ) {\n\treturn actionCreator( actionListener( target ) );\n}\n\nexport {\n\tmixin,\n\treactMixin,\n\tactionListener,\n\tactionCreator,\n\tactionCreatorListener,\n\tdispatch,\n\tluxWrapper\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/mixins/index.js\n **/","// **********************************************\n// *                 Store Mixin                *\n// **********************************************\n\nimport { storeChannel, dispatcherChannel } from \"../bus\";\nimport { ensureLuxProp, entries } from \"../utils\";\n\nfunction gateKeeper( instance, store, data ) {\n\tconst payload = {};\n\tpayload[ store ] = true;\n\tconst __lux = instance.__lux;\n\n\tconst found = __lux.waitFor.indexOf( store );\n\n\tif ( found > -1 ) {\n\t\t__lux.waitFor.splice( found, 1 );\n\t\t__lux.heardFrom.push( payload );\n\n\t\tif ( __lux.waitFor.length === 0 ) {\n\t\t\t__lux.heardFrom = [];\n\t\t\tinstance.stores.onChange.call( instance, payload );\n\t\t}\n\t}\n}\n\nfunction handlePreNotify( instance, data ) {\n\tinstance.__lux.waitFor = data.stores.filter(\n\t\titem => instance.stores.listenTo.indexOf( item ) > -1\n\t);\n}\n\nexport const storeMixin = {\n\tsetup() {\n\t\tconst __lux = ensureLuxProp( this );\n\t\tconst stores = this.stores;\n\t\tif ( !stores ) {\n\t\t\tthrow new Error( \"Your component must provide a \\\"stores\\\" key\" );\n\t\t}\n\n\t\tif ( !stores.listenTo || !stores.listenTo.length ) {\n\t\t\tthrow new Error( \"listenTo must contain at least one store namespace\" );\n\t\t}\n\n\t\tconst listenTo = typeof stores.listenTo === \"string\" ? [ stores.listenTo ] : stores.listenTo;\n\n\t\tif ( !stores.onChange ) {\n\t\t\tthrow new Error( `A component was told to listen to the following store(s): ${listenTo} but no onChange handler was implemented` );\n\t\t}\n\n\t\t__lux.waitFor = [];\n\t\t__lux.heardFrom = [];\n\n\t\tlistenTo.forEach( store => {\n\t\t\t__lux.subscriptions[ `${store}.changed` ] = storeChannel.subscribe( `${store}.changed`, () => gateKeeper( this, store ) );\n\t\t} );\n\n\t\t__lux.subscriptions.prenotify = dispatcherChannel.subscribe( \"prenotify\", data => handlePreNotify( this, data ) );\n\t},\n\tteardown() {\n\t\tfor ( const [ key, sub ] of entries( this.__lux.subscriptions ) ) {\n\t\t\tlet split;\n\t\t\t// eslint-disable-next-line no-cond-assign\n\t\t\tif ( key === \"prenotify\" || ( ( split = key.split( \".\" ) ) && split.pop() === \"changed\" ) ) {\n\t\t\t\tsub.unsubscribe();\n\t\t\t}\n\t\t}\n\t},\n\tmixin: {}\n};\n\nexport const storeReactMixin = {\n\tcomponentWillMount: storeMixin.setup,\n\tcomponentWillUnmount: storeMixin.teardown\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/mixins/store.js\n **/","// *******************************************\n// *           Action Creator Mixin          *\n// *******************************************\n\nimport { entries } from \"../utils\";\nimport { getActionGroup, actions } from \"../actions\";\n\nexport function dispatch( action, ...args ) {\n\tif ( actions[ action ] ) {\n\t\tactions[ action ]( ...args );\n\t} else {\n\t\tthrow new Error( `There is no action named '${action}'` );\n\t}\n}\n\nexport const actionCreatorMixin = {\n\tsetup() {\n\t\tthis.getActionGroup = this.getActionGroup || [];\n\t\tthis.getActions = this.getActions || [];\n\n\t\tif ( typeof this.getActions === \"string\" ) {\n\t\t\tthis.getActions = [ this.getActions ];\n\t\t}\n\n\t\tconst addActionIfNotPresent = ( k, v ) => {\n\t\t\tif ( !this[ k ] ) {\n\t\t\t\tthis[ k ] = v;\n\t\t\t}\n\t\t};\n\t\tthis.getActionGroup.forEach( group => {\n\t\t\tfor ( const [ k, v ] of entries( getActionGroup( group ) ) ) {\n\t\t\t\taddActionIfNotPresent( k, v );\n\t\t\t}\n\t\t} );\n\n\t\tif ( this.getActions.length ) {\n\t\t\tthis.getActions.forEach( function( key ) {\n\t\t\t\taddActionIfNotPresent( key, function() {\n\t\t\t\t\tdispatch( key, ...arguments );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t},\n\tmixin: { dispatch }\n};\n\nexport const actionCreatorReactMixin = {\n\tcomponentWillMount: actionCreatorMixin.setup,\n\tdispatch\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/mixins/actionCreator.js\n **/","// **********************************************\n// *            Action Listener Mixin           *\n// **********************************************\n\nimport { actionChannel } from \"../bus\";\nimport { ensureLuxProp } from \"../utils\";\nimport { generateActionCreator, addToActionGroup } from \"../actions\";\n\nexport function actionListenerMixin( { handlers, handlerFn, context, channel, topic } = {} ) {\n\treturn {\n\t\tsetup() {\n\t\t\tcontext = context || this;\n\t\t\tconst __lux = ensureLuxProp( context );\n\t\t\tconst subs = __lux.subscriptions;\n\t\t\thandlers = handlers || context.handlers;\n\t\t\tchannel = channel || actionChannel;\n\t\t\ttopic = topic || \"execute.*\";\n\t\t\thandlerFn = handlerFn || ( ( data, env ) => {\n\t\t\t\tconst handler = handlers[ data.actionType ];\n\t\t\t\tif ( handler ) {\n\t\t\t\t\thandler.apply( context, data.actionArgs );\n\t\t\t\t}\n\t\t\t} );\n\t\t\tif ( !handlers || !Object.keys( handlers ).length ) {\n\t\t\t\tthrow new Error( \"You must have at least one action handler in the handlers property\" );\n\t\t\t} else if ( subs && subs.actionListener ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsubs.actionListener = channel.subscribe( topic, handlerFn ).context( context );\n\t\t\tconst handlerKeys = Object.keys( handlers );\n\t\t\tgenerateActionCreator( handlerKeys );\n\t\t\tif ( context.namespace ) {\n\t\t\t\taddToActionGroup( context.namespace, handlerKeys );\n\t\t\t}\n\t\t},\n\t\tteardown() {\n\t\t\tthis.__lux.subscriptions.actionListener.unsubscribe();\n\t\t}\n\t};\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/mixins/actionListener.js\n **/","// **********************************************\n// *   Generalized Mixin Behavior for non-lux   *\n// **********************************************\n\nimport React from \"react\";\nimport { setupStoreListener, setupActionMap } from \"./wrapperUtils\";\nimport { entries } from \"../utils\";\n\nexport default function luxWrapper( Component, { actions, stores, getState } ) {\n\tclass LuxWrapper extends React.Component {\n\t\tconstructor( props, context ) {\n\t\t\tsuper( props, context );\n\t\t\tsetupStoreListener( this, { stores, getState } );\n\t\t\tsetupActionMap( this, { actions } );\n\t\t\tif ( getState ) {\n\t\t\t\tconst initialPayload = ( stores || [] ).reduce( ( m, s ) => {\n\t\t\t\t\tm[ s ] = true;\n\t\t\t\t\treturn m;\n\t\t\t\t}, {} );\n\t\t\t\tthis.state = getState( props, initialPayload );\n\t\t\t}\n\t\t}\n\n\t\tcomponentWillUnmount() {\n\t\t\tfor ( const [ key, sub ] of entries( this.__lux.subscriptions ) ) {\n\t\t\t\tlet split;\n\t\t\t\t// eslint-disable-next-line no-cond-assign\n\t\t\t\tif ( key === \"prenotify\" || ( ( split = key.split( \".\" ) ) && split.pop() === \"changed\" ) ) {\n\t\t\t\t\tsub.unsubscribe();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\trender() {\n\t\t\treturn React.createElement(\n\t\t\t\tComponent,\n\t\t\t\tObject.assign(\n\t\t\t\t\t{},\n\t\t\t\t\tthis.props,\n\t\t\t\t\tthis.propToAction,\n\t\t\t\t\tthis.state\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tLuxWrapper.displayName = `LuxWrapped(${ Component.displayName || \"Component\" })`;\n\n\treturn LuxWrapper;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/mixins/luxWrapper.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}\n ** module id = 11\n ** module chunks = 0 1\n **/","// **********************************************\n// *   wrapper utilities                        *\n// **********************************************\n\nimport { ensureLuxProp, entries } from \"../utils\";\nimport { storeChannel, dispatcherChannel } from \"../bus\";\nimport { dispatch } from \"./actionCreator\";\nimport { isString, isFunction } from \"lodash\";\n\nexport function gateKeeper( instance, { getState }, store ) {\n\tconst payload = {};\n\tpayload[ store ] = true;\n\tconst __lux = instance.__lux;\n\n\tconst found = __lux.waitFor.indexOf( store );\n\n\tif ( found > -1 ) {\n\t\t__lux.waitFor.splice( found, 1 );\n\t\t__lux.heardFrom.push( payload );\n\n\t\tif ( __lux.waitFor.length === 0 ) {\n\t\t\t__lux.heardFrom = [];\n\t\t\tinstance.setState( getState( instance.props, payload ) );\n\t\t}\n\t}\n}\n\nexport function handlePreNotify( instance, stores, data ) {\n\tinstance.__lux.waitFor = data.stores.filter(\n\t\titem => stores.indexOf( item ) > -1\n\t);\n}\n\nexport function setupStoreListener( instance, { stores, getState } ) {\n\tconst __lux = ensureLuxProp( instance );\n\t__lux.waitFor = [];\n\t__lux.heardFrom = [];\n\n\tif ( stores && stores.length ) {\n\t\tstores.forEach( store => {\n\t\t\t__lux.subscriptions[ `${ store }.changed` ] = storeChannel.subscribe(\n\t\t\t\t`${ store }.changed`,\n\t\t\t\t() => gateKeeper( instance, { getState }, store )\n\t\t\t);\n\t\t} );\n\n\t\t__lux.subscriptions.prenotify = dispatcherChannel.subscribe(\n\t\t\t\"prenotify\",\n\t\t\tdata => handlePreNotify( instance, stores, data )\n\t\t);\n\t}\n}\n\nexport function isSyntheticEvent( e ) {\n\treturn e.hasOwnProperty( \"eventPhase\" ) &&\n\t\te.hasOwnProperty( \"nativeEvent\" ) &&\n\t\te.hasOwnProperty( \"target\" ) &&\n\t\te.hasOwnProperty( \"type\" );\n}\n\nexport function getDefaultActionCreator( action ) {\n\tif ( Object.prototype.toString.call( action ) === \"[object String]\" ) {\n\t\treturn function( e, ...args ) {\n\t\t\tif ( !isSyntheticEvent( e ) ) {\n\t\t\t\targs.unshift( e );\n\t\t\t}\n\t\t\tdispatch( action, ...args );\n\t\t};\n\t}\n\treturn undefined;\n}\n\nexport function setupActionMap( instance, { actions } ) {\n\tinstance.propToAction = {};\n\tfor ( const [ childProp, action ] of entries( actions || {} ) ) {\n\t\tlet actionCreator = action; // assumes function by default\n\t\tif ( isString( action ) ) {\n\t\t\tactionCreator = getDefaultActionCreator( action );\n\t\t} else if ( !isFunction( action ) ) {\n\t\t\tthrow new Error( \"The values provided to the luxWrapper actions parameter must be a string or a function\" );\n\t\t}\n\t\tinstance.propToAction[ childProp ] = actionCreator;\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/mixins/wrapperUtils.js\n **/","import { storeChannel, dispatcherChannel } from \"./bus\";\nimport { entries } from \"./utils\";\nimport dispatcher from \"./dispatcher\";\nimport _ from \"lodash\";\nimport { mixin } from \"./mixins\";\n\nexport const stores = {};\n\nfunction buildActionList( handlers ) {\n\tconst actionList = [];\n\tfor ( const [ key, handler ] of entries( handlers ) ) {\n\t\tactionList.push( {\n\t\t\tactionType: key,\n\t\t\twaitFor: handler.waitFor || []\n\t\t} );\n\t}\n\treturn actionList;\n}\n\nfunction ensureStoreOptions( options, handlers, store ) {\n\tconst namespace = ( options && options.namespace ) || store.namespace;\n\tif ( namespace in stores ) {\n\t\tthrow new Error( `The store namespace \"${namespace}\" already exists.` );\n\t}\n\tif ( !namespace ) {\n\t\tthrow new Error( \"A lux store must have a namespace value provided\" );\n\t}\n\tif ( !handlers || !Object.keys( handlers ).length ) {\n\t\tthrow new Error( \"A lux store must have action handler methods provided\" );\n\t}\n}\n\nfunction getHandlerObject( key, listeners ) {\n\treturn {\n\t\twaitFor: [],\n\t\thandler() {\n\t\t\tlet changed = 0;\n\t\t\tconst args = Array.from( arguments );\n\t\t\tlisteners[ key ].forEach( function( listener ) {\n\t\t\t\tchanged += ( listener.apply( this, args ) === false ? 0 : 1 );\n\t\t\t}.bind( this ) );\n\t\t\treturn changed > 0;\n\t\t}\n\t};\n}\n\nfunction updateWaitFor( source, handlerObject ) {\n\tif ( source.waitFor ) {\n\t\tsource.waitFor.forEach( function( dep ) {\n\t\t\tif ( handlerObject.waitFor.indexOf( dep ) === -1 ) {\n\t\t\t\thandlerObject.waitFor.push( dep );\n\t\t\t}\n\t\t} );\n\t}\n}\n\nfunction addListeners( listeners, key, handler ) {\n\tlisteners[ key ] = listeners[ key ] || [];\n\tlisteners[ key ].push( handler.handler || handler );\n}\n\nfunction processStoreArgs( ...options ) {\n\tconst listeners = {};\n\tconst handlers = {};\n\tconst state = {};\n\tconst otherOpts = {};\n\toptions.forEach( function( o ) {\n\t\tlet opt;\n\t\tif ( o ) {\n\t\t\topt = _.clone( o );\n\t\t\t_.merge( state, opt.state );\n\t\t\tif ( opt.handlers ) {\n\t\t\t\tObject.keys( opt.handlers ).forEach( function( key ) {\n\t\t\t\t\tconst handler = opt.handlers[ key ];\n\t\t\t\t\t// set up the actual handler method that will be executed\n\t\t\t\t\t// as the store handles a dispatched action\n\t\t\t\t\thandlers[ key ] = handlers[ key ] || getHandlerObject( key, listeners );\n\t\t\t\t\t// ensure that the handler definition has a list of all stores\n\t\t\t\t\t// being waited upon\n\t\t\t\t\tupdateWaitFor( handler, handlers[ key ] );\n\t\t\t\t\t// Add the original handler method(s) to the listeners queue\n\t\t\t\t\taddListeners( listeners, key, handler );\n\t\t\t\t} );\n\t\t\t}\n\t\t\tdelete opt.handlers;\n\t\t\tdelete opt.state;\n\t\t\t_.merge( otherOpts, opt );\n\t\t}\n\t} );\n\treturn [ state, handlers, otherOpts ];\n}\n\nexport class Store {\n\n\tconstructor( ...opt ) {\n\t\tlet [ state, handlers, options ] = processStoreArgs( ...opt );  // eslint-disable-line prefer-const\n\t\tensureStoreOptions( options, handlers, this );\n\t\tconst namespace = options.namespace;\n\t\tObject.assign( this, options );\n\t\tstores[ namespace ] = this;\n\t\tlet inDispatch = false;\n\t\tthis.hasChanged = false;\n\n\t\tthis.getState = function() {\n\t\t\treturn state;\n\t\t};\n\n\t\tthis.setState = function( newState ) {\n\t\t\tif ( !inDispatch ) {\n\t\t\t\tthrow new Error( \"setState can only be called during a dispatch cycle from a store action handler.\" );\n\t\t\t}\n\t\t\tstate = Object.assign( state, newState );\n\t\t};\n\n\t\tthis.replaceState = function( newState ) {\n\t\t\tif ( !inDispatch ) {\n\t\t\t\tthrow new Error( \"replaceState can only be called during a dispatch cycle from a store action handler.\" );\n\t\t\t}\n\t\t\t// we preserve the underlying state ref, but clear it\n\t\t\tObject.keys( state ).forEach( function( key ) {\n\t\t\t\tdelete state[ key ];\n\t\t\t} );\n\t\t\tstate = Object.assign( state, newState );\n\t\t};\n\n\t\tthis.flush = function flush() {\n\t\t\tinDispatch = false;\n\t\t\tif ( this.hasChanged ) {\n\t\t\t\tthis.hasChanged = false;\n\t\t\t\tstoreChannel.publish( `${this.namespace}.changed` );\n\t\t\t}\n\t\t};\n\n\t\tmixin( this, mixin.actionListener( {\n\t\t\tcontext: this,\n\t\t\tchannel: dispatcherChannel,\n\t\t\ttopic: `${namespace}.handle.*`,\n\t\t\thandlers,\n\t\t\thandlerFn: function( data ) {\n\t\t\t\tif ( handlers.hasOwnProperty( data.actionType ) ) {\n\t\t\t\t\tinDispatch = true;\n\t\t\t\t\tconst res = handlers[ data.actionType ].handler.apply( this, data.actionArgs.concat( data.deps ) );\n\t\t\t\t\tthis.hasChanged = !( res === false );\n\t\t\t\t\tdispatcherChannel.publish(\n\t\t\t\t\t\t`${this.namespace}.handled.${data.actionType}`,\n\t\t\t\t\t\t{ hasChanged: this.hasChanged, namespace: this.namespace }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}.bind( this )\n\t\t} ) );\n\n\t\tthis.__subscription = {\n\t\t\tnotify: dispatcherChannel.subscribe( \"notify\", () => this.flush() )\n\t\t\t\t\t.constraint( () => inDispatch )\n\t\t};\n\n\t\tdispatcher.registerStore(\n\t\t\t{\n\t\t\t\tnamespace,\n\t\t\t\tactions: buildActionList( handlers )\n\t\t\t}\n\t\t);\n\t}\n\n\t// Need to build in behavior to remove this store\n\t// from the dispatcher's actionMap as well!\n\tdispose() {\n\t\t/*eslint-disable */\n\t\tfor ( let [ k, subscription ] of entries( this.__subscription ) ) {\n\t\t\tsubscription.unsubscribe();\n\t\t}\n\t\t/*eslint-enable */\n\t\tdelete stores[ this.namespace ];\n\t\tdispatcher.removeStore( this.namespace );\n\t\tthis.luxCleanup();\n\t}\n}\n\nexport function removeStore( namespace ) {\n\tstores[ namespace ].dispose();\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store.js\n **/","\nimport _ from \"lodash\";\nimport { dispatcherChannel, actionChannel } from \"./bus\";\nimport { entries } from \"./utils\";\nimport machina from \"machina\";\n\nfunction calculateGen( store, lookup, gen, actionType, namespaces ) {\n\tlet calcdGen = gen;\n\tconst _namespaces = namespaces || [];\n\tif ( _namespaces.indexOf( store.namespace ) > -1 ) {\n\t\tthrow new Error( `Circular dependency detected for the \"${store.namespace}\" store when participating in the \"${actionType}\" action.` );\n\t}\n\tif ( store.waitFor && store.waitFor.length ) {\n\t\tstore.waitFor.forEach( function( dep ) {\n\t\t\tconst depStore = lookup[ dep ];\n\t\t\tif ( depStore ) {\n\t\t\t\t_namespaces.push( store.namespace );\n\t\t\t\tconst thisGen = calculateGen( depStore, lookup, gen + 1, actionType, _namespaces );\n\t\t\t\tif ( thisGen > calcdGen ) {\n\t\t\t\t\tcalcdGen = thisGen;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tconsole.warn( `The \"${actionType}\" action in the \"${store.namespace}\" store waits for \"${dep}\" but a store with that namespace does not participate in this action.` );\n\t\t\t}\n\t\t} );\n\t}\n\treturn calcdGen;\n}\n\nfunction buildGenerations( stores, actionType ) {\n\tconst tree = [];\n\tconst lookup = {};\n\t/*eslint-disable */\n\tstores.forEach( store => lookup[ store.namespace ] = store );\n\tstores.forEach( store => store.gen = calculateGen( store, lookup, 0, actionType ) );\n\tfor ( let [ key, item ] of entries( lookup ) ) {\n\t\ttree[ item.gen ] = tree[ item.gen ] || [];\n\t\ttree[ item.gen ].push( item );\n\t}\n\t/*eslint-enable */\n\treturn tree;\n}\n\nfunction processGeneration( generation, action ) {\n\tgeneration.map( store => {\n\t\tconst data = Object.assign( {\n\t\t\tdeps: _.pick( this.stores, store.waitFor ) // eslint-disable-line no-invalid-this\n\t\t}, action );\n\t\tdispatcherChannel.publish(\n\t\t\t`${store.namespace}.handle.${action.actionType}`,\n\t\t\tdata\n\t\t);\n\t} );\n}\n\nclass Dispatcher extends machina.BehavioralFsm {\n\tconstructor() {\n\t\tsuper( {\n\t\t\tinitialState: \"ready\",\n\t\t\tactionMap: {},\n\t\t\tstates: {\n\t\t\t\tready: {\n\t\t\t\t\t_onEnter() {\n\t\t\t\t\t\tthis.actionContext = undefined;\n\t\t\t\t\t},\n\t\t\t\t\t\"action.dispatch\": \"dispatching\"\n\t\t\t\t},\n\t\t\t\tdispatching: {\n\t\t\t\t\t_onEnter( luxAction ) {\n\t\t\t\t\t\tthis.actionContext = luxAction;\n\t\t\t\t\t\tif ( luxAction.generations.length ) {\n\t\t\t\t\t\t\tfor ( const generation of luxAction.generations ) {\n\t\t\t\t\t\t\t\tprocessGeneration.call( luxAction, generation, luxAction.action );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.transition( luxAction, \"notifying\" );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.transition( luxAction, \"nothandled\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"action.handled\"( luxAction, data ) {\n\t\t\t\t\t\tif ( data.hasChanged ) {\n\t\t\t\t\t\t\tluxAction.updated.push( data.namespace );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t_onExit( luxAction ) {\n\t\t\t\t\t\tif ( luxAction.updated.length ) {\n\t\t\t\t\t\t\tdispatcherChannel.publish( \"prenotify\", { stores: luxAction.updated } );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tnotifying: {\n\t\t\t\t\t_onEnter( luxAction ) {\n\t\t\t\t\t\tdispatcherChannel.publish( \"notify\", {\n\t\t\t\t\t\t\taction: luxAction.action\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tnothandled: {}\n\t\t\t},\n\t\t\tgetStoresHandling( actionType ) {\n\t\t\t\tconst stores = this.actionMap[ actionType ] || [];\n\t\t\t\treturn {\n\t\t\t\t\tstores,\n\t\t\t\t\tgenerations: buildGenerations( stores, actionType )\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\t\tthis.createSubscribers();\n\t// eslint-enable object-shorthand\n\t}\n\n\thandleActionDispatch( data ) {\n\t\tconst luxAction = Object.assign(\n\t\t\t{ action: data, generationIndex: 0, updated: [] },\n\t\t\tthis.getStoresHandling( data.actionType )\n\t\t);\n\t\tthis.handle( luxAction, \"action.dispatch\" );\n\t}\n\n\tregisterStore( storeMeta ) {\n\t\tfor ( const actionDef of storeMeta.actions ) {\n\t\t\tconst actionName = actionDef.actionType;\n\t\t\tconst actionMeta = {\n\t\t\t\tnamespace: storeMeta.namespace,\n\t\t\t\twaitFor: actionDef.waitFor\n\t\t\t};\n\t\t\tconst action = this.actionMap[ actionName ] = this.actionMap[ actionName ] || [];\n\t\t\taction.push( actionMeta );\n\t\t}\n\t}\n\n\tremoveStore( namespace ) {\n\t\tfunction isThisNameSpace( meta ) {\n\t\t\treturn meta.namespace === namespace;\n\t\t}\n\t\t/*eslint-disable */\n\t\tfor ( let [ k, v ] of entries( this.actionMap ) ) {\n\t\t\tlet idx = v.findIndex( isThisNameSpace );\n\t\t\tif ( idx !== -1 ) {\n\t\t\t\tv.splice( idx, 1 );\n\t\t\t}\n\t\t}\n\t\t/*eslint-enable */\n\t}\n\n\tcreateSubscribers() {\n\t\tthis.__subscriptions = [\n\t\t\tactionChannel.subscribe(\n\t\t\t\t\"execute.*\",\n\t\t\t\t( data, env ) => this.handleActionDispatch( data )\n\t\t\t),\n\t\t\tdispatcherChannel.subscribe(\n\t\t\t\t\"*.handled.*\",\n\t\t\t\tdata => this.handle( this.actionContext, \"action.handled\", data )\n\t\t\t).constraint( () => !!this.actionContext )\n\t\t];\n\t}\n\n\tdispose() {\n\t\tif ( this.__subscriptions ) {\n\t\t\tthis.__subscriptions.forEach( subscription => subscription.unsubscribe() );\n\t\t\tthis.__subscriptions = null;\n\t\t}\n\t}\n}\n\nexport default new Dispatcher();\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/dispatcher.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_15__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"machina\"\n ** module id = 15\n ** module chunks = 0 1\n **/"],"sourceRoot":""}