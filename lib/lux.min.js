/*!
 *  * lux.js - Flux-based architecture for using ReactJS at LeanKit
 *  * Author: Jim Cowart
 *  * Version: v2.0.0-11
 *  * Url: https://github.com/LeanKit-Labs/lux.js
 *  * License(s): 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash"),require("postal"),require("machina"),require("react")):"function"==typeof define&&define.amd?define(["lodash","postal","machina","react"],e):"object"==typeof exports?exports.lux=e(require("lodash"),require("postal"),require("machina"),require("react")):t.lux=e(t._,t.postal,t.machina,t.React)}(window,(function(t,e,n,r){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./js/",n(n.s=7)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.ensureLuxProp=function(t){var e=t.__lux=t.__lux||{};e.cleanup=e.cleanup||[],e.subscriptions=e.subscriptions||{};return e},e.entries=a;var o=n(9),i=regeneratorRuntime.mark(a);function a(t){var e,n,o,a,c,u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:-1===["object","function"].indexOf(void 0===t?"undefined":r(t))&&(t={}),e=!0,n=!1,o=void 0,i.prev=4,a=Object.keys(t)[Symbol.iterator]();case 6:if(e=(c=a.next()).done){i.next=13;break}return u=c.value,i.next=10,[u,t[u]];case 10:e=!0,i.next=6;break;case 13:i.next=19;break;case 15:i.prev=15,i.t0=i.catch(4),n=!0,o=i.t0;case 19:i.prev=19,i.prev=20,!e&&a.return&&a.return();case 22:if(i.prev=22,!n){i.next=25;break}throw o;case 25:return i.finish(22);case 26:return i.finish(19);case 27:case"end":return i.stop()}}),i,this,[[4,15,19,27],[20,,22,26]])}e.default={printActions:o.printActions,printStoreDepTree:o.printStoreDepTree}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.postal=e.dispatcherChannel=e.storeChannel=e.actionChannel=void 0;var r,o=n(10),i=(r=o)&&r.__esModule?r:{default:r};var a=i.default.channel("lux.action"),c=i.default.channel("lux.store"),u=i.default.channel("lux.dispatcher");e.actionChannel=a,e.storeChannel=c,e.dispatcherChannel=u,e.postal=i.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.actionGroups=e.actions=void 0;var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.generateActionCreator=function(t){t.forEach((function(t){s[t]||(s[t]=function(){var e=Array.from(arguments);u.actionChannel.publish({topic:"execute."+t,data:{actionType:t,actionArgs:e}})})}))},e.getActionGroup=function(t){if(l[t])return a.default.pick(s,l[t]);throw new Error("There is no action group named '"+t+"'")},e.getGroupsWithAction=function(t){var e=[],n=!0,o=!1,i=void 0;try{for(var a,u=(0,c.entries)(l)[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=r(a.value,2),f=s[0];s[1].indexOf(t)>=0&&e.push(f)}}catch(t){o=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return e},e.customActionCreator=function(t){Object.assign(s,t)},e.addToActionGroup=function(t,e){var n=l[t];n||(n=l[t]=[]);e="string"==typeof e?[e]:e;var r=a.default.difference(e,Object.keys(s));if(r.length)throw new Error("The following actions do not exist: "+r.join(", "));e.forEach((function(t){-1===n.indexOf(t)&&n.push(t)}))};var o,i=n(3),a=(o=i)&&o.__esModule?o:{default:o},c=n(0),u=n(1);var s=e.actions=Object.create(null),l=e.actionGroups=Object.create(null)},function(e,n){e.exports=t},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=u(n(3)),a=n(1),c=n(0);function u(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var n=[],r={};t.forEach((function(t){return r[t.namespace]=t})),t.forEach((function(t){return t.gen=function t(e,n,r,o,i){var a=r,c=i||[];if(c.indexOf(e.namespace)>-1)throw new Error('Circular dependency detected for the "'+e.namespace+'" store when participating in the "'+o+'" action.');return e.waitFor&&e.waitFor.length&&e.waitFor.forEach((function(i){var u=n[i];if(u){c.push(e.namespace);var s=t(u,n,r+1,o,c);s>a&&(a=s)}else console.warn('The "'+o+'" action in the "'+e.namespace+'" store waits for "'+i+'" but a store with that namespace does not participate in this action.')})),a}(t,r,0,e)}));var i=!0,a=!1,u=void 0;try{for(var s,l=(0,c.entries)(r)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var f=o(s.value,2),p=(f[0],f[1]);n[p.gen]=n[p.gen]||[],n[p.gen].push(p)}}catch(t){a=!0,u=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw u}}return n}function l(t,e){var n=this;t.map((function(t){var r=Object.assign({deps:i.default.pick(n.stores,t.waitFor)},e);a.dispatcherChannel.publish(t.namespace+".handle."+e.actionType,r)}))}var f=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{initialState:"ready",actionMap:{},states:{ready:{_onEnter:function(){this.actionContext=void 0},"action.dispatch":"dispatching"},dispatching:{_onEnter:function(t){if(this.actionContext=t,t.generations.length){var e=!0,n=!1,r=void 0;try{for(var o,i=t.generations[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;l.call(t,a,t.action)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}this.transition(t,"notifying")}else this.transition(t,"nothandled")},"action.handled":function(t,e){e.hasChanged&&t.updated.push(e.namespace)},_onExit:function(t){t.updated.length&&a.dispatcherChannel.publish("prenotify",{stores:t.updated})}},notifying:{_onEnter:function(t){a.dispatcherChannel.publish("notify",{action:t.action})}},nothandled:{}},getStoresHandling:function(t){var e=this.actionMap[t]||[];return{stores:e,generations:s(e,t)}}}));return t.createSubscribers(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"handleActionDispatch",value:function(t){var e=Object.assign({action:t,generationIndex:0,updated:[]},this.getStoresHandling(t.actionType));this.handle(e,"action.dispatch")}},{key:"registerStore",value:function(t){var e=!0,n=!1,r=void 0;try{for(var o,i=t.actions[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value,c=a.actionType,u={namespace:t.namespace,waitFor:a.waitFor};(this.actionMap[c]=this.actionMap[c]||[]).push(u)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"removeStore",value:function(t){function e(e){return e.namespace===t}var n=!0,r=!1,i=void 0;try{for(var a,u=(0,c.entries)(this.actionMap)[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=o(a.value,2),l=(s[0],s[1]),f=l.findIndex(e);-1!==f&&l.splice(f,1)}}catch(t){r=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw i}}}},{key:"createSubscribers",value:function(){var t=this;this.__subscriptions=[a.actionChannel.subscribe("execute.*",(function(e){return t.handleActionDispatch(e)})),a.dispatcherChannel.subscribe("*.handled.*",(function(e){return t.handle(t.actionContext,"action.handled",e)})).constraint((function(){return!!t.actionContext}))]}},{key:"dispose",value:function(){this.__subscriptions&&(this.__subscriptions.forEach((function(t){return t.unsubscribe()})),this.__subscriptions=null)}}]),e}(u(n(11)).default.BehavioralFsm);e.default=new f,t.exports=e.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.luxWrapper=e.dispatch=e.actionCreatorListener=e.actionCreator=e.actionListener=e.reactMixin=e.mixin=void 0;var r,o=n(12),i=n(6),a=n(13),c=n(14),u=(r=c)&&r.__esModule?r:{default:r};function s(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return 0===n.length&&(n=[o.storeMixin,i.actionCreatorMixin]),n.forEach((function(e){if("function"==typeof e&&(e=e()),e.mixin&&Object.assign(t,e.mixin),"function"!=typeof e.setup)throw new Error("Lux mixins should have a setup method. Did you perhaps pass your mixins ahead of your target instance?");e.setup.call(t),e.teardown&&t.__lux.cleanup.push(e.teardown)})),t.luxCleanup=function(){t.__lux.cleanup.forEach((function(e){return e.call(t)})),t.__lux.cleanup=void 0,delete t.__lux.cleanup},t}s.store=o.storeMixin,s.actionCreator=i.actionCreatorMixin,s.actionListener=a.actionListenerMixin;var l={actionCreator:i.actionCreatorReactMixin,store:o.storeReactMixin};function f(t){return s(t,a.actionListenerMixin)}function p(t){return s(t,i.actionCreatorMixin)}e.mixin=s,e.reactMixin=l,e.actionListener=f,e.actionCreator=p,e.actionCreatorListener=function(t){return p(f(t))},e.dispatch=i.dispatch,e.luxWrapper=u.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.actionCreatorReactMixin=e.actionCreatorMixin=void 0;var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.dispatch=a;var o=n(0),i=n(2);function a(t){if(!i.actions[t])throw new Error("There is no action named '"+t+"'");for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];i.actions[t].apply(i.actions,n)}var c=e.actionCreatorMixin={setup:function(){var t=this;this.getActionGroup=this.getActionGroup||[],this.getActions=this.getActions||[],"string"==typeof this.getActions&&(this.getActions=[this.getActions]);var e=function(e,n){t[e]||(t[e]=n)};this.getActionGroup.forEach((function(t){var n=!0,a=!1,c=void 0;try{for(var u,s=(0,o.entries)((0,i.getActionGroup)(t))[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var l=r(u.value,2),f=l[0],p=l[1];e(f,p)}}catch(t){a=!0,c=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw c}}})),this.getActions.length&&this.getActions.forEach((function(t){e(t,(function(){a.apply(void 0,[t].concat(Array.prototype.slice.call(arguments)))}))}))},mixin:{dispatch:a}};e.actionCreatorReactMixin={componentWillMount:c.setup,dispatch:a}},function(t,e,n){(function(r){Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(0)),i=n(2),a=n(5),c=n(17),u=s(n(4));function s(t){return t&&t.__esModule?t:{default:t}}if(!(void 0===r?window:r)._babelPolyfill)throw new Error("You must include the babel polyfill on your page before lux is loaded. See https://babeljs.io/docs/usage/polyfill/ for more details.");e.default={actions:i.actions,customActionCreator:i.customActionCreator,dispatch:a.dispatch,publishAction:function(){console&&"function"==typeof console.log&&console.log("lux.publishAction has been deprecated and will be removed in future releases. Please use lux.dispatch."),a.dispatch.apply(void 0,arguments)},dispatcher:u.default,getActionGroup:i.getActionGroup,actionCreatorListener:a.actionCreatorListener,actionCreator:a.actionCreator,actionListener:a.actionListener,mixin:a.mixin,reactMixin:a.reactMixin,removeStore:c.removeStore,Store:c.Store,stores:c.stores,utils:o.default,luxWrapper:a.luxWrapper},t.exports=e.default}).call(this,n(8))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.printActions=function(){var t=Object.keys(o.actions).map((function(t){return{"action name":t,stores:a.default.getStoresHandling(t).stores.map((function(t){return t.namespace})).join(","),groups:(0,o.getGroupsWithAction)(t).join(",")}}));console&&console.table?(console.group("Currently Recognized Actions"),console.table(t),console.groupEnd()):console&&console.log&&console.log(t)},e.printStoreDepTree=function(t){var e=[];(t="string"==typeof t?[t]:t)||(t=Object.keys(o.actions));t.forEach((function(t){a.default.getStoresHandling(t).generations.forEach((function(n){for(;n.length;){var r=n.pop();e.push({"action type":t,"store namespace":r.namespace,"waits for":r.waitFor.join(","),generation:r.gen})}})),console&&console.table?(console.group("Store Dependency List for "+t),console.table(e),console.groupEnd()):console&&console.log&&(console.log("Store Dependency List for "+t+":"),console.log(e)),e=[]}))};var r,o=n(2),i=n(4),a=(r=i)&&r.__esModule?r:{default:r}},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.storeReactMixin=e.storeMixin=void 0;var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(1),i=n(0);var a=e.storeMixin={setup:function(){var t=this,e=(0,i.ensureLuxProp)(this),n=this.stores;if(!n)throw new Error('Your component must provide a "stores" key');if(!n.listenTo||!n.listenTo.length)throw new Error("listenTo must contain at least one store namespace");var r="string"==typeof n.listenTo?[n.listenTo]:n.listenTo;if(!n.onChange)throw new Error("A component was told to listen to the following store(s): "+r+" but no onChange handler was implemented");e.waitFor=[],e.heardFrom=[],r.forEach((function(n){e.subscriptions[n+".changed"]=o.storeChannel.subscribe(n+".changed",(function(){return function(t,e){var n={};n[e]=!0;var r=t.__lux,o=r.waitFor.indexOf(e);o>-1&&(r.waitFor.splice(o,1),r.heardFrom.push(n),0===r.waitFor.length&&(r.heardFrom=[],t.stores.onChange.call(t,n)))}(t,n)}))})),e.subscriptions.prenotify=o.dispatcherChannel.subscribe("prenotify",(function(e){return function(t,e){t.__lux.waitFor=e.stores.filter((function(e){return t.stores.listenTo.indexOf(e)>-1}))}(t,e)}))},teardown:function(){var t=!0,e=!1,n=void 0;try{for(var o,a=(0,i.entries)(this.__lux.subscriptions)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var c=r(o.value,2),u=c[0],s=c[1],l=void 0;("prenotify"===u||(l=u.split("."))&&"changed"===l.pop())&&s.unsubscribe()}}catch(t){e=!0,n=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw n}}},mixin:{}};e.storeReactMixin={componentWillMount:a.setup,componentWillUnmount:a.teardown}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.actionListenerMixin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.handlers,n=t.handlerFn,a=t.context,c=t.channel,u=t.topic;return{setup:function(){a=a||this;var t=(0,o.ensureLuxProp)(a).subscriptions;if(e=e||a.handlers,c=c||r.actionChannel,u=u||"execute.*",n=n||function(t){var n=e[t.actionType];n&&n.apply(a,t.actionArgs)},!e||!Object.keys(e).length)throw new Error("You must have at least one action handler in the handlers property");if(!t||!t.actionListener){t.actionListener=c.subscribe(u,n).context(a);var s=Object.keys(e);(0,i.generateActionCreator)(s),a.namespace&&(0,i.addToActionGroup)(a.namespace,s)}},teardown:function(){this.__lux.subscriptions.actionListener.unsubscribe()}}};var r=n(1),o=n(0),i=n(2)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(15),c=(r=a)&&r.__esModule?r:{default:r},u=n(16),s=n(0);e.default=function(t,e){var n=e.actions,r=e.stores,a=e.getState,l=e.pureComponent,f=void 0!==l&&l,p=e.componentWillMount,h=e.componentDidMount,d=e.componentWillReceiveProps,y=e.componentWillUpdate,v=e.componentDidUpdate,b=e.componentWillUnmount;function m(t,e){var n=(r||[]).reduce((function(t,e){return t[e]=!0,t}),{});return a(e,n)}var g=function(e){function l(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,t,e));return(0,u.setupStoreListener)(o,{stores:r,getState:a}),(0,u.setupActionMap)(o,{actions:n}),a&&(o.state=m(0,t)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,e),i(l,[{key:"UNSAFE_componentWillMount",value:function(){if(p){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];p.apply(this,e)}}},{key:"componentDidMount",value:function(){if(h){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];h.apply(this,e)}}},{key:"UNSAFE_componentWillReceiveProps",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];a&&this.setState(m.apply(void 0,[this].concat(e))),d&&d.apply(this,e)}},{key:"UNSAFE_componentWillUpdate",value:function(){if(y){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];y.apply(this,e)}}},{key:"componentDidUpdate",value:function(){if(v){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];v.apply(this,e)}}},{key:"componentWillUnmount",value:function(){if(b){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];b.apply(this,e)}var r=!0,i=!1,a=void 0;try{for(var c,u=(0,s.entries)(this.__lux.subscriptions)[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var l=o(c.value,2),f=l[0],p=l[1],h=void 0;("prenotify"===f||(h=f.split("."))&&"changed"===h.pop())&&p.unsubscribe()}}catch(t){i=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}}},{key:"render",value:function(){return c.default.createElement(t,Object.assign({},this.props,this.propToAction,this.state))}}]),l}(c.default[f?"PureComponent":"Component"]);return g.displayName="LuxWrapped("+(t.displayName||"Component")+")",g},t.exports=e.default},function(t,e){t.exports=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.gateKeeper=u,e.handlePreNotify=s,e.setupStoreListener=function(t,e){var n=e.stores,r=e.getState,a=(0,o.ensureLuxProp)(t);a.waitFor=[],a.heardFrom=[],n&&n.length&&(n.forEach((function(e){a.subscriptions[e+".changed"]=i.storeChannel.subscribe(e+".changed",(function(){return u(t,{getState:r},e)}))})),a.subscriptions.prenotify=i.dispatcherChannel.subscribe("prenotify",(function(e){return s(t,n,e)})))},e.isSyntheticEvent=l,e.getDefaultActionCreator=f,e.setupActionMap=function(t,e){var n=e.actions;t.propToAction={};var i=!0,a=!1,u=void 0;try{for(var s,l=(0,o.entries)(n||{})[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var p=r(s.value,2),h=p[0],d=p[1],y=d;if((0,c.isString)(d))y=f(d);else if(!(0,c.isFunction)(d))throw new Error("The values provided to the luxWrapper actions parameter must be a string or a function");t.propToAction[h]=y}}catch(t){a=!0,u=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw u}}};var o=n(0),i=n(1),a=n(6),c=n(3);function u(t,e,n){var r=e.getState,o={};o[n]=!0;var i=t.__lux,a=i.waitFor.indexOf(n);a>-1&&(i.waitFor.splice(a,1),i.heardFrom.push(o),0===i.waitFor.length&&(i.heardFrom=[],t.setState(r(t.props,o))))}function s(t,e,n){t.__lux.waitFor=n.stores.filter((function(t){return e.indexOf(t)>-1}))}function l(t){return t.hasOwnProperty("eventPhase")&&t.hasOwnProperty("nativeEvent")&&t.hasOwnProperty("target")&&t.hasOwnProperty("type")}function f(t){if("[object String]"===Object.prototype.toString.call(t))return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];l(e)||r.unshift(e),a.dispatch.apply(void 0,[t].concat(r))}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Store=e.stores=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.removeStore=function(t){f[t].dispose()};var i=n(1),a=n(0),c=l(n(4)),u=l(n(3)),s=n(5);function l(t){return t&&t.__esModule?t:{default:t}}var f=e.stores={};function p(t){var e=[],n=!0,r=!1,i=void 0;try{for(var c,u=(0,a.entries)(t)[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var s=o(c.value,2),l=s[0],f=s[1];e.push({actionType:l,waitFor:f.waitFor||[]})}}catch(t){r=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw i}}return e}function h(){for(var t={},e={},n={},r={},o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return i.forEach((function(o){var i=void 0;o&&(i=u.default.clone(o),u.default.merge(n,i.state),i.handlers&&Object.keys(i.handlers).forEach((function(n){var r,o,a=i.handlers[n];e[n]=e[n]||function(t,e){return{waitFor:[],handler:function(){var n=0,r=Array.from(arguments);return e[t].forEach(function(t){n+=!1===t.apply(this,r)?0:1}.bind(this)),n>0}}}(n,t),r=a,o=e[n],r.waitFor&&r.waitFor.forEach((function(t){-1===o.waitFor.indexOf(t)&&o.waitFor.push(t)})),function(t,e,n){t[e]=t[e]||[],t[e].push(n.handler||n)}(t,n,a)})),delete i.handlers,delete i.state,u.default.merge(r,i))})),[n,e,r]}e.Store=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=h.apply(void 0,arguments),r=o(n,3),a=r[0],u=r[1],l=r[2];!function(t,e,n){var r=t&&t.namespace||n.namespace;if(r in f)throw new Error('The store namespace "'+r+'" already exists.');if(!r)throw new Error("A lux store must have a namespace value provided");if(!e||!Object.keys(e).length)throw new Error("A lux store must have action handler methods provided")}(l,u,this);var d=l.namespace;Object.assign(this,l),f[d]=this;var y=!1;this.hasChanged=!1,this.getState=function(){return a},this.setState=function(t){if(!y)throw new Error("setState can only be called during a dispatch cycle from a store action handler.");a=Object.assign(a,t)},this.replaceState=function(t){if(!y)throw new Error("replaceState can only be called during a dispatch cycle from a store action handler.");Object.keys(a).forEach((function(t){delete a[t]})),a=Object.assign(a,t)},this.flush=function(){y=!1,this.hasChanged&&(this.hasChanged=!1,i.storeChannel.publish(this.namespace+".changed"))},(0,s.mixin)(this,s.mixin.actionListener({context:this,channel:i.dispatcherChannel,topic:d+".handle.*",handlers:u,handlerFn:function(t){if(u.hasOwnProperty(t.actionType)){y=!0;var e=u[t.actionType].handler.apply(this,t.actionArgs.concat(t.deps));this.hasChanged=!(!1===e),i.dispatcherChannel.publish(this.namespace+".handled."+t.actionType,{hasChanged:this.hasChanged,namespace:this.namespace})}}.bind(this)})),this.__subscription={notify:i.dispatcherChannel.subscribe("notify",(function(){return e.flush()})).constraint((function(){return y}))},c.default.registerStore({namespace:d,actions:p(u)})}return r(t,[{key:"dispose",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=(0,a.entries)(this.__subscription)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var u=o(r.value,2);u[0];u[1].unsubscribe()}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}delete f[this.namespace],c.default.removeStore(this.namespace),this.luxCleanup()}}]),t}()}])}));
//# sourceMappingURL=lux.min.js.map