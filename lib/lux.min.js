/*!
 *  * lux.js - Flux-based architecture for using ReactJS at LeanKit
 *  * Author: Jim Cowart
 *  * Version: v2.0.0-9
 *  * Url: https://github.com/LeanKit-Labs/lux.js
 *  * License(s): 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash"),require("postal"),require("machina"),require("react")):"function"==typeof define&&define.amd?define(["lodash","postal","machina","react"],e):"object"==typeof exports?exports.lux=e(require("lodash"),require("postal"),require("machina"),require("react")):t.lux=e(t._,t.postal,t.machina,t.React)}(this,function(t,e,n,r){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="./js/",e(0)}([function(t,e,n){(function(r){function o(t){return t&&t.__esModule?t:{"default":t}}function i(){console&&"function"==typeof console.log&&console.log("lux.publishAction has been deprecated and will be removed in future releases. Please use lux.dispatch."),s.dispatch.apply(void 0,arguments)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),c=o(a),u=n(3),s=n(9),l=n(16),f=n(7),p=o(f);if(!("undefined"==typeof r?window:r)._babelPolyfill)throw new Error("You must include the babel polyfill on your page before lux is loaded. See https://babeljs.io/docs/usage/polyfill/ for more details.");e["default"]={actions:u.actions,customActionCreator:u.customActionCreator,dispatch:s.dispatch,publishAction:i,dispatcher:p["default"],getActionGroup:u.getActionGroup,actionCreatorListener:s.actionCreatorListener,actionCreator:s.actionCreator,actionListener:s.actionListener,mixin:s.mixin,reactMixin:s.reactMixin,removeStore:l.removeStore,Store:l.Store,stores:l.stores,utils:c["default"],luxWrapper:s.luxWrapper},t.exports=e["default"]}).call(e,function(){return this}())},function(t,e,n){function r(t){var e=t.__lux=t.__lux||{};e.cleanup=e.cleanup||[],e.subscriptions=e.subscriptions||{};return e}function o(t){var e,n,r,o,a,u;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:["object","function"].indexOf("undefined"==typeof t?"undefined":i(t))===-1&&(t={}),e=!0,n=!1,r=void 0,c.prev=4,o=Object.keys(t)[Symbol.iterator]();case 6:if(e=(a=o.next()).done){c.next=13;break}return u=a.value,c.next=10,[u,t[u]];case 10:e=!0,c.next=6;break;case 13:c.next=19;break;case 15:c.prev=15,c.t0=c["catch"](4),n=!0,r=c.t0;case 19:c.prev=19,c.prev=20,!e&&o["return"]&&o["return"]();case 22:if(c.prev=22,!n){c.next=25;break}throw r;case 25:return c.finish(22);case 26:return c.finish(19);case 27:case"end":return c.stop()}},c[0],this,[[4,15,19,27],[20,,22,26]])}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.ensureLuxProp=r,e.entries=o;var a=n(2),c=[o].map(regeneratorRuntime.mark);e["default"]={printActions:a.printActions,printStoreDepTree:a.printStoreDepTree}},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function o(){var t=Object.keys(a.actions).map(function(t){return{"action name":t,stores:u["default"].getStoresHandling(t).stores.map(function(t){return t.namespace}).join(","),groups:(0,a.getGroupsWithAction)(t).join(",")}});console&&console.table?(console.group("Currently Recognized Actions"),console.table(t),console.groupEnd()):console&&console.log&&console.log(t)}function i(t){var e=[];t="string"==typeof t?[t]:t,t||(t=Object.keys(a.actions)),t.forEach(function(t){u["default"].getStoresHandling(t).generations.forEach(function(n){for(;n.length;){var r=n.pop();e.push({"action type":t,"store namespace":r.namespace,"waits for":r.waitFor.join(","),generation:r.gen})}}),console&&console.table?(console.group("Store Dependency List for "+t),console.table(e),console.groupEnd()):console&&console.log&&(console.log("Store Dependency List for "+t+":"),console.log(e)),e=[]})}Object.defineProperty(e,"__esModule",{value:!0}),e.printActions=o,e.printStoreDepTree=i;var a=n(3),c=n(7),u=r(c)},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){t.forEach(function(t){d[t]||(d[t]=function(){var e=Array.from(arguments);h.actionChannel.publish({topic:"execute."+t,data:{actionType:t,actionArgs:e}})})})}function i(t){if(y[t])return f["default"].pick(d,y[t]);throw new Error("There is no action group named '"+t+"'")}function a(t){var e=[],n=!0,r=!1,o=void 0;try{for(var i,a=(0,p.entries)(y)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=s(i.value,2),u=c[0],l=c[1];l.indexOf(t)>=0&&e.push(u)}}catch(f){r=!0,o=f}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw o}}return e}function c(t){Object.assign(d,t)}function u(t,e){var n=y[t];n||(n=y[t]=[]),e="string"==typeof e?[e]:e;var r=f["default"].difference(e,Object.keys(d));if(r.length)throw new Error("The following actions do not exist: "+r.join(", "));e.forEach(function(t){n.indexOf(t)===-1&&n.push(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.actionGroups=e.actions=void 0;var s=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.generateActionCreator=o,e.getActionGroup=i,e.getGroupsWithAction=a,e.customActionCreator=c,e.addToActionGroup=u;var l=n(4),f=r(l),p=n(1),h=n(5),d=e.actions=Object.create(null),y=e.actionGroups=Object.create(null)},function(e,n){e.exports=t},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.postal=e.dispatcherChannel=e.storeChannel=e.actionChannel=void 0;var o=n(6),i=r(o),a=i["default"].channel("lux.action"),c=i["default"].channel("lux.store"),u=i["default"].channel("lux.dispatcher");e.actionChannel=a,e.storeChannel=c,e.dispatcherChannel=u,e.postal=i["default"]},function(t,n){t.exports=e},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e,n,r,o){var i=n,a=o||[];if(a.indexOf(t.namespace)>-1)throw new Error('Circular dependency detected for the "'+t.namespace+'" store when participating in the "'+r+'" action.');return t.waitFor&&t.waitFor.length&&t.waitFor.forEach(function(o){var u=e[o];if(u){a.push(t.namespace);var s=c(u,e,n+1,r,a);s>i&&(i=s)}else console.warn('The "'+r+'" action in the "'+t.namespace+'" store waits for "'+o+'" but a store with that namespace does not participate in this action.')}),i}function u(t,e){var n=[],r={};t.forEach(function(t){return r[t.namespace]=t}),t.forEach(function(t){return t.gen=c(t,r,0,e)});var o=!0,i=!1,a=void 0;try{for(var u,s=(0,y.entries)(r)[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=f(u.value,2),p=(l[0],l[1]);n[p.gen]=n[p.gen]||[],n[p.gen].push(p)}}catch(h){i=!0,a=h}finally{try{!o&&s["return"]&&s["return"]()}finally{if(i)throw a}}return n}function s(t,e){var n=this;t.map(function(t){var r=Object.assign({deps:h["default"].pick(n.stores,t.waitFor)},e);d.dispatcherChannel.publish(t.namespace+".handle."+e.actionType,r)})}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=n(4),h=r(p),d=n(5),y=n(1),v=n(8),b=r(v),m=function(t){function e(){o(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{initialState:"ready",actionMap:{},states:{ready:{_onEnter:function(){this.actionContext=void 0},"action.dispatch":"dispatching"},dispatching:{_onEnter:function(t){if(this.actionContext=t,t.generations.length){var e=!0,n=!1,r=void 0;try{for(var o,i=t.generations[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;s.call(t,a,t.action)}}catch(c){n=!0,r=c}finally{try{!e&&i["return"]&&i["return"]()}finally{if(n)throw r}}this.transition(t,"notifying")}else this.transition(t,"nothandled")},"action.handled":function(t,e){e.hasChanged&&t.updated.push(e.namespace)},_onExit:function(t){t.updated.length&&d.dispatcherChannel.publish("prenotify",{stores:t.updated})}},notifying:{_onEnter:function(t){d.dispatcherChannel.publish("notify",{action:t.action})}},nothandled:{}},getStoresHandling:function(t){var e=this.actionMap[t]||[];return{stores:e,generations:u(e,t)}}}));return t.createSubscribers(),t}return a(e,t),l(e,[{key:"handleActionDispatch",value:function(t){var e=Object.assign({action:t,generationIndex:0,updated:[]},this.getStoresHandling(t.actionType));this.handle(e,"action.dispatch")}},{key:"registerStore",value:function(t){var e=!0,n=!1,r=void 0;try{for(var o,i=t.actions[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value,c=a.actionType,u={namespace:t.namespace,waitFor:a.waitFor},s=this.actionMap[c]=this.actionMap[c]||[];s.push(u)}}catch(l){n=!0,r=l}finally{try{!e&&i["return"]&&i["return"]()}finally{if(n)throw r}}}},{key:"removeStore",value:function(t){function e(e){return e.namespace===t}var n=!0,r=!1,o=void 0;try{for(var i,a=(0,y.entries)(this.actionMap)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=f(i.value,2),u=(c[0],c[1]),s=u.findIndex(e);s!==-1&&u.splice(s,1)}}catch(l){r=!0,o=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw o}}}},{key:"createSubscribers",value:function(){var t=this;this.__subscriptions=[d.actionChannel.subscribe("execute.*",function(e,n){return t.handleActionDispatch(e)}),d.dispatcherChannel.subscribe("*.handled.*",function(e){return t.handle(t.actionContext,"action.handled",e)}).constraint(function(){return!!t.actionContext})]}},{key:"dispose",value:function(){this.__subscriptions&&(this.__subscriptions.forEach(function(t){return t.unsubscribe()}),this.__subscriptions=null)}}]),e}(b["default"].BehavioralFsm);e["default"]=new m,t.exports=e["default"]},function(t,e){t.exports=n},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return 0===n.length&&(n=[u.storeMixin,s.actionCreatorMixin]),n.forEach(function(e){if("function"==typeof e&&(e=e()),e.mixin&&Object.assign(t,e.mixin),"function"!=typeof e.setup)throw new Error("Lux mixins should have a setup method. Did you perhaps pass your mixins ahead of your target instance?");e.setup.call(t),e.teardown&&t.__lux.cleanup.push(e.teardown)}),t.luxCleanup=function(){t.__lux.cleanup.forEach(function(e){return e.call(t)}),t.__lux.cleanup=void 0,delete t.__lux.cleanup},t}function i(t){return o(t,l.actionListenerMixin)}function a(t){return o(t,s.actionCreatorMixin)}function c(t){return a(i(t))}Object.defineProperty(e,"__esModule",{value:!0}),e.luxWrapper=e.dispatch=e.actionCreatorListener=e.actionCreator=e.actionListener=e.reactMixin=e.mixin=void 0;var u=n(10),s=n(11),l=n(12),f=n(13),p=r(f);o.store=u.storeMixin,o.actionCreator=s.actionCreatorMixin,o.actionListener=l.actionListenerMixin;var h={actionCreator:s.actionCreatorReactMixin,store:u.storeReactMixin};e.mixin=o,e.reactMixin=h,e.actionListener=i,e.actionCreator=a,e.actionCreatorListener=c,e.dispatch=s.dispatch,e.luxWrapper=p["default"]},function(t,e,n){function r(t,e,n){var r={};r[e]=!0;var o=t.__lux,i=o.waitFor.indexOf(e);i>-1&&(o.waitFor.splice(i,1),o.heardFrom.push(r),0===o.waitFor.length&&(o.heardFrom=[],t.stores.onChange.call(t,r)))}function o(t,e){t.__lux.waitFor=e.stores.filter(function(e){return t.stores.listenTo.indexOf(e)>-1})}Object.defineProperty(e,"__esModule",{value:!0}),e.storeReactMixin=e.storeMixin=void 0;var i=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(5),c=n(1),u=e.storeMixin={setup:function(){var t=this,e=(0,c.ensureLuxProp)(this),n=this.stores;if(!n)throw new Error('Your component must provide a "stores" key');if(!n.listenTo||!n.listenTo.length)throw new Error("listenTo must contain at least one store namespace");var i="string"==typeof n.listenTo?[n.listenTo]:n.listenTo;if(!n.onChange)throw new Error("A component was told to listen to the following store(s): "+i+" but no onChange handler was implemented");e.waitFor=[],e.heardFrom=[],i.forEach(function(n){e.subscriptions[n+".changed"]=a.storeChannel.subscribe(n+".changed",function(){return r(t,n)})}),e.subscriptions.prenotify=a.dispatcherChannel.subscribe("prenotify",function(e){return o(t,e)})},teardown:function(){var t=!0,e=!1,n=void 0;try{for(var r,o=(0,c.entries)(this.__lux.subscriptions)[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=i(r.value,2),u=a[0],s=a[1],l=void 0;("prenotify"===u||(l=u.split("."))&&"changed"===l.pop())&&s.unsubscribe()}}catch(f){e=!0,n=f}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw n}}},mixin:{}};e.storeReactMixin={componentWillMount:u.setup,componentWillUnmount:u.teardown}},function(t,e,n){function r(t){if(!a.actions[t])throw new Error("There is no action named '"+t+"'");for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];a.actions[t].apply(a.actions,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.actionCreatorReactMixin=e.actionCreatorMixin=void 0;var o=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.dispatch=r;var i=n(1),a=n(3),c=e.actionCreatorMixin={setup:function(){var t=this;this.getActionGroup=this.getActionGroup||[],this.getActions=this.getActions||[],"string"==typeof this.getActions&&(this.getActions=[this.getActions]);var e=function(e,n){t[e]||(t[e]=n)};this.getActionGroup.forEach(function(t){var n=!0,r=!1,c=void 0;try{for(var u,s=(0,i.entries)((0,a.getActionGroup)(t))[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var l=o(u.value,2),f=l[0],p=l[1];e(f,p)}}catch(h){r=!0,c=h}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw c}}}),this.getActions.length&&this.getActions.forEach(function(t){e(t,function(){r.apply(void 0,[t].concat(Array.prototype.slice.call(arguments)))})})},mixin:{dispatch:r}};e.actionCreatorReactMixin={componentWillMount:c.setup,dispatch:r}},function(t,e,n){function r(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.handlers,n=t.handlerFn,r=t.context,c=t.channel,u=t.topic;return{setup:function(){r=r||this;var t=(0,i.ensureLuxProp)(r),s=t.subscriptions;if(e=e||r.handlers,c=c||o.actionChannel,u=u||"execute.*",n=n||function(t,n){var o=e[t.actionType];o&&o.apply(r,t.actionArgs)},!e||!Object.keys(e).length)throw new Error("You must have at least one action handler in the handlers property");if(!s||!s.actionListener){s.actionListener=c.subscribe(u,n).context(r);var l=Object.keys(e);(0,a.generateActionCreator)(l),r.namespace&&(0,a.addToActionGroup)(r.namespace,l)}},teardown:function(){this.__lux.subscriptions.actionListener.unsubscribe()}}}Object.defineProperty(e,"__esModule",{value:!0}),e.actionListenerMixin=r;var o=n(5),i=n(1),a=n(3)},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){function n(t,e){var n=(c||[]).reduce(function(t,e){return t[e]=!0,t},{});return l(e,n)}var r=e.actions,c=e.stores,l=e.getState,d=e.pureComponent,y=void 0!==d&&d,v=e.componentWillMount,b=e.componentDidMount,m=e.componentWillReceiveProps,g=e.componentWillUpdate,x=e.componentDidUpdate,w=e.componentWillUnmount,_=l&&l.length,S=function(e){function d(t,e){o(this,d);var a=i(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,t,e));return(0,p.setupStoreListener)(a,{stores:c,getState:l}),(0,p.setupActionMap)(a,{actions:r}),l&&(a.state=n(a,t)),a}return a(d,e),s(d,[{key:"componentWillMount",value:function(){if(v){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];v.apply(this,e)}}},{key:"componentDidMount",value:function(){if(b){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];b.apply(this,e)}}},{key:"componentWillReceiveProps",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];l&&_&&this.setState(n.apply(void 0,[this].concat(e))),m&&m.apply(this,e)}},{key:"componentWillUpdate",value:function(){if(g){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];g.apply(this,e)}}},{key:"componentDidUpdate",value:function(){if(x){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];x.apply(this,e)}}},{key:"componentWillUnmount",value:function(){if(w){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];w.apply(this,e)}var r=!0,o=!1,i=void 0;try{for(var a,c=(0,h.entries)(this.__lux.subscriptions)[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var s=u(a.value,2),l=s[0],f=s[1],p=void 0;("prenotify"===l||(p=l.split("."))&&"changed"===p.pop())&&f.unsubscribe()}}catch(d){o=!0,i=d}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}}},{key:"render",value:function(){return f["default"].createElement(t,Object.assign({},this.props,this.propToAction,this.state))}}]),d}(f["default"][y?"PureComponent":"Component"]);return S.displayName="LuxWrapped("+(t.displayName||"Component")+")",S}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(14),f=r(l),p=n(15),h=n(1);e["default"]=c,t.exports=e["default"]},function(t,e){t.exports=r},function(t,e,n){function r(t,e,n){var r=e.getState,o={};o[n]=!0;var i=t.__lux,a=i.waitFor.indexOf(n);a>-1&&(i.waitFor.splice(a,1),i.heardFrom.push(o),0===i.waitFor.length&&(i.heardFrom=[],t.setState(r(t.props,o))))}function o(t,e,n){t.__lux.waitFor=n.stores.filter(function(t){return e.indexOf(t)>-1})}function i(t,e){var n=e.stores,i=e.getState,a=(0,l.ensureLuxProp)(t);a.waitFor=[],a.heardFrom=[],n&&n.length&&(n.forEach(function(e){a.subscriptions[e+".changed"]=f.storeChannel.subscribe(e+".changed",function(){return r(t,{getState:i},e)})}),a.subscriptions.prenotify=f.dispatcherChannel.subscribe("prenotify",function(e){return o(t,n,e)}))}function a(t){return t.hasOwnProperty("eventPhase")&&t.hasOwnProperty("nativeEvent")&&t.hasOwnProperty("target")&&t.hasOwnProperty("type")}function c(t){if("[object String]"===Object.prototype.toString.call(t))return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];a(e)||r.unshift(e),p.dispatch.apply(void 0,[t].concat(r))}}function u(t,e){var n=e.actions;t.propToAction={};var r=!0,o=!1,i=void 0;try{for(var a,u=(0,l.entries)(n||{})[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var f=s(a.value,2),p=f[0],d=f[1],y=d;if((0,h.isString)(d))y=c(d);else if(!(0,h.isFunction)(d))throw new Error("The values provided to the luxWrapper actions parameter must be a string or a function");t.propToAction[p]=y}}catch(v){o=!0,i=v}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.gateKeeper=r,e.handlePreNotify=o,e.setupStoreListener=i,e.isSyntheticEvent=a,e.getDefaultActionCreator=c,e.setupActionMap=u;var l=n(1),f=n(5),p=n(11),h=n(4)},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){var e=[],n=!0,r=!1,o=void 0;try{for(var i,a=(0,y.entries)(t)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=h(i.value,2),u=c[0],s=c[1];e.push({actionType:u,waitFor:s.waitFor||[]})}}catch(l){r=!0,o=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw o}}return e}function a(t,e,n){var r=t&&t.namespace||n.namespace;if(r in w)throw new Error('The store namespace "'+r+'" already exists.');if(!r)throw new Error("A lux store must have a namespace value provided");if(!e||!Object.keys(e).length)throw new Error("A lux store must have action handler methods provided")}function c(t,e){return{waitFor:[],handler:function(){var n=0,r=Array.from(arguments);return e[t].forEach(function(t){n+=t.apply(this,r)===!1?0:1}.bind(this)),n>0}}}function u(t,e){t.waitFor&&t.waitFor.forEach(function(t){e.waitFor.indexOf(t)===-1&&e.waitFor.push(t)})}function s(t,e,n){t[e]=t[e]||[],t[e].push(n.handler||n)}function l(){for(var t={},e={},n={},r={},o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return i.forEach(function(o){var i=void 0;o&&(i=g["default"].clone(o),g["default"].merge(n,i.state),i.handlers&&Object.keys(i.handlers).forEach(function(n){var r=i.handlers[n];e[n]=e[n]||c(n,t),u(r,e[n]),s(t,n,r)}),delete i.handlers,delete i.state,g["default"].merge(r,i))}),[n,e,r]}function f(t){w[t].dispose()}Object.defineProperty(e,"__esModule",{value:!0}),e.Store=e.stores=void 0;var p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.removeStore=f;var d=n(5),y=n(1),v=n(7),b=r(v),m=n(4),g=r(m),x=n(9),w=e.stores={};e.Store=function(){function t(){var e=this;o(this,t);var n=l.apply(void 0,arguments),r=h(n,3),c=r[0],u=r[1],s=r[2];a(s,u,this);var f=s.namespace;Object.assign(this,s),w[f]=this;var p=!1;this.hasChanged=!1,this.getState=function(){return c},this.setState=function(t){if(!p)throw new Error("setState can only be called during a dispatch cycle from a store action handler.");c=Object.assign(c,t)},this.replaceState=function(t){if(!p)throw new Error("replaceState can only be called during a dispatch cycle from a store action handler.");Object.keys(c).forEach(function(t){delete c[t]}),c=Object.assign(c,t)},this.flush=function(){p=!1,this.hasChanged&&(this.hasChanged=!1,d.storeChannel.publish(this.namespace+".changed"))},(0,x.mixin)(this,x.mixin.actionListener({context:this,channel:d.dispatcherChannel,topic:f+".handle.*",handlers:u,handlerFn:function(t){if(u.hasOwnProperty(t.actionType)){p=!0;var e=u[t.actionType].handler.apply(this,t.actionArgs.concat(t.deps));this.hasChanged=!(e===!1),d.dispatcherChannel.publish(this.namespace+".handled."+t.actionType,{hasChanged:this.hasChanged,namespace:this.namespace})}}.bind(this)})),this.__subscription={notify:d.dispatcherChannel.subscribe("notify",function(){return e.flush()}).constraint(function(){return p})},b["default"].registerStore({namespace:f,actions:i(u)})}return p(t,[{key:"dispose",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,o=(0,y.entries)(this.__subscription)[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=h(r.value,2),a=(i[0],i[1]);a.unsubscribe()}}catch(c){e=!0,n=c}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw n}}delete w[this.namespace],b["default"].removeStore(this.namespace),this.luxCleanup()}}]),t}()}])});
//# sourceMappingURL=lux.min.js.map