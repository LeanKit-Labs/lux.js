{"version":3,"sources":["webpack://lux/webpack/universalModuleDefinition","webpack://lux/webpack/bootstrap","webpack://lux/./src/utils.js","webpack://lux/./src/bus.js","webpack://lux/./src/actions.js","webpack://lux/external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}","webpack://lux/./src/dispatcher.js","webpack://lux/./src/mixins/index.js","webpack://lux/./src/mixins/actionCreator.js","webpack://lux/./src/lux.js","webpack://lux/(webpack)/buildin/global.js","webpack://lux/./src/printUtils.js","webpack://lux/external \"postal\"","webpack://lux/external \"machina\"","webpack://lux/./src/mixins/store.js","webpack://lux/./src/mixins/actionListener.js","webpack://lux/./src/mixins/luxWrapper.js","webpack://lux/external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack://lux/./src/mixins/wrapperUtils.js","webpack://lux/./src/store.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__10__","__WEBPACK_EXTERNAL_MODULE__11__","__WEBPACK_EXTERNAL_MODULE__15__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ensureLuxProp","context","__lux","cleanup","subscriptions","entries","obj","indexOf","keys","k","printActions","printStoreDepTree","actionChannel","channel","storeChannel","dispatcherChannel","postal","generateActionCreator","actionList","forEach","action","actions","args","Array","from","arguments","publish","topic","data","actionType","actionArgs","getActionGroup","group","actionGroups","pick","Error","getGroupsWithAction","actionName","groups","push","customActionCreator","assign","addToActionGroup","groupName","diff","difference","length","join","buildGenerations","stores","tree","lookup","store","namespace","gen","calculateGen","namespaces","calcdGen","_namespaces","waitFor","dep","depStore","thisGen","console","warn","item","processGeneration","generation","map","deps","Dispatcher","initialState","actionMap","states","ready","_onEnter","this","actionContext","undefined","dispatching","luxAction","generations","transition","hasChanged","updated","_onExit","notifying","nothandled","getStoresHandling","createSubscribers","BehavioralFsm","generationIndex","handle","storeMeta","actionDef","actionMeta","isThisNameSpace","meta","v","idx","findIndex","splice","__subscriptions","subscribe","env","handleActionDispatch","constraint","subscription","unsubscribe","mixin","mixins","mxn","setup","teardown","luxCleanup","method","actionCreator","actionListener","reactMixin","target","actionCreatorListener","dispatch","luxWrapper","actionCreatorMixin","getActions","addActionIfNotPresent","actionCreatorReactMixin","componentWillMount","global","_babelPolyfill","publishAction","log","dispatcher","removeStore","Store","utils","g","Function","e","x","table","groupEnd","at","pop","storeMixin","listenTo","onChange","heardFrom","instance","payload","found","gateKeeper","prenotify","filter","handlePreNotify","sub","split","storeReactMixin","componentWillUnmount","actionListenerMixin","handlers","handlerFn","subs","handler","apply","handlerKeys","Component","getState","pureComponent","componentDidMount","componentWillReceiveProps","componentWillUpdate","componentDidUpdate","getComponentState","props","initialPayload","reduce","LuxWrapper","setupStoreListener","setupActionMap","state","setState","createElement","propToAction","displayName","isSyntheticEvent","getDefaultActionCreator","childProp","isString","isFunction","toString","unshift","dispose","buildActionList","processStoreArgs","listeners","otherOpts","options","opt","clone","merge","source","handlerObject","changed","listener","getHandlerObject","addListeners","ensureStoreOptions","inDispatch","newState","replaceState","flush","res","concat","__subscription","notify","registerStore"],"mappings":"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","file":"lux.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"postal\"), require(\"machina\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"postal\", \"machina\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lux\"] = factory(require(\"lodash\"), require(\"postal\"), require(\"machina\"), require(\"react\"));\n\telse\n\t\troot[\"lux\"] = factory(root[\"_\"], root[\"postal\"], root[\"machina\"], root[\"React\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__10__, __WEBPACK_EXTERNAL_MODULE__11__, __WEBPACK_EXTERNAL_MODULE__15__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./js/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","import { printActions, printStoreDepTree } from \"./printUtils\";\n\nexport function ensureLuxProp( context ) {\n\tconst __lux = context.__lux = ( context.__lux || {} );\n\t/*eslint-disable */\n\tconst cleanup = __lux.cleanup = ( __lux.cleanup || [] );\n\tconst subscriptions = __lux.subscriptions = ( __lux.subscriptions || {} );\n\t/*eslint-enable */\n\treturn __lux;\n}\n\nexport function *entries( obj ) {\n\tif ( [ \"object\", \"function\" ].indexOf( typeof obj ) === -1 ) {\n\t\tobj = {};\n\t}\n\tfor ( const k of Object.keys( obj ) ) {\n\t\tyield [ k, obj[ k ] ];\n\t}\n}\n\nexport default { printActions, printStoreDepTree };\n","import postal from \"postal\";\n\nconst actionChannel = postal.channel( \"lux.action\" );\nconst storeChannel = postal.channel( \"lux.store\" );\nconst dispatcherChannel = postal.channel( \"lux.dispatcher\" );\n\nexport {\n\tactionChannel,\n\tstoreChannel,\n\tdispatcherChannel,\n\tpostal\n};\n","import _ from \"lodash\";\nimport { entries } from \"./utils\";\nimport { actionChannel } from \"./bus\";\nexport const actions = Object.create( null );\nexport const actionGroups = Object.create( null );\n\nexport function generateActionCreator( actionList ) {\n\tactionList.forEach( function( action ) {\n\t\tif ( !actions[ action ] ) {\n\t\t\tactions[ action ] = function() {\n\t\t\t\tconst args = Array.from( arguments );\n\t\t\t\tactionChannel.publish( {\n\t\t\t\t\ttopic: `execute.${action}`,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tactionType: action,\n\t\t\t\t\t\tactionArgs: args\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t};\n\t\t}\n\t} );\n}\n\n// This method is deprecated, but will remain as\n// long as the print utils need it.\n/* istanbul ignore next */\nexport function getActionGroup( group ) {\n\tif ( actionGroups[ group ] ) {\n\t\treturn _.pick( actions, actionGroups[ group ] );\n\t}\n\tthrow new Error( `There is no action group named '${group}'` );\n}\n\n// This method is deprecated, but will remain as\n// long as the print utils need it.\n/* istanbul ignore next */\nexport function getGroupsWithAction( actionName ) {\n\tconst groups = [];\n\tfor ( const [ group, list ] of entries( actionGroups ) ) {\n\t\tif ( list.indexOf( actionName ) >= 0 ) {\n\t\t\tgroups.push( group );\n\t\t}\n\t}\n\treturn groups;\n}\n\nexport function customActionCreator( action ) {\n\tObject.assign( actions, action );\n}\n\n// This method is deprecated, but will remain as\n// long as the print utils need it.\n/* istanbul ignore next */\nexport function addToActionGroup( groupName, actionList ) {\n\tlet group = actionGroups[ groupName ];\n\tif ( !group ) {\n\t\tgroup = actionGroups[ groupName ] = [];\n\t}\n\tactionList = typeof actionList === \"string\" ? [ actionList ] : actionList;\n\tconst diff = _.difference( actionList, Object.keys( actions ) );\n\tif ( diff.length ) {\n\t\tthrow new Error( `The following actions do not exist: ${diff.join( \", \" )}` );\n\t}\n\tactionList.forEach( function( action ) {\n\t\tif ( group.indexOf( action ) === -1 ) {\n\t\t\tgroup.push( action );\n\t\t}\n\t} );\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","\nimport _ from \"lodash\";\nimport { dispatcherChannel, actionChannel } from \"./bus\";\nimport { entries } from \"./utils\";\nimport machina from \"machina\";\n\nfunction calculateGen( store, lookup, gen, actionType, namespaces ) {\n\tlet calcdGen = gen;\n\tconst _namespaces = namespaces || [];\n\tif ( _namespaces.indexOf( store.namespace ) > -1 ) {\n\t\tthrow new Error( `Circular dependency detected for the \"${store.namespace}\" store when participating in the \"${actionType}\" action.` );\n\t}\n\tif ( store.waitFor && store.waitFor.length ) {\n\t\tstore.waitFor.forEach( function( dep ) {\n\t\t\tconst depStore = lookup[ dep ];\n\t\t\tif ( depStore ) {\n\t\t\t\t_namespaces.push( store.namespace );\n\t\t\t\tconst thisGen = calculateGen( depStore, lookup, gen + 1, actionType, _namespaces );\n\t\t\t\tif ( thisGen > calcdGen ) {\n\t\t\t\t\tcalcdGen = thisGen;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tconsole.warn( `The \"${actionType}\" action in the \"${store.namespace}\" store waits for \"${dep}\" but a store with that namespace does not participate in this action.` );\n\t\t\t}\n\t\t} );\n\t}\n\treturn calcdGen;\n}\n\nfunction buildGenerations( stores, actionType ) {\n\tconst tree = [];\n\tconst lookup = {};\n\t/*eslint-disable */\n\tstores.forEach( store => lookup[ store.namespace ] = store );\n\tstores.forEach( store => store.gen = calculateGen( store, lookup, 0, actionType ) );\n\tfor ( let [ key, item ] of entries( lookup ) ) {\n\t\ttree[ item.gen ] = tree[ item.gen ] || [];\n\t\ttree[ item.gen ].push( item );\n\t}\n\t/*eslint-enable */\n\treturn tree;\n}\n\nfunction processGeneration( generation, action ) {\n\tgeneration.map( store => {\n\t\tconst data = Object.assign( {\n\t\t\tdeps: _.pick( this.stores, store.waitFor ) // eslint-disable-line no-invalid-this\n\t\t}, action );\n\t\tdispatcherChannel.publish(\n\t\t\t`${store.namespace}.handle.${action.actionType}`,\n\t\t\tdata\n\t\t);\n\t} );\n}\n\nclass Dispatcher extends machina.BehavioralFsm {\n\tconstructor() {\n\t\tsuper( {\n\t\t\tinitialState: \"ready\",\n\t\t\tactionMap: {},\n\t\t\tstates: {\n\t\t\t\tready: {\n\t\t\t\t\t_onEnter() {\n\t\t\t\t\t\tthis.actionContext = undefined;\n\t\t\t\t\t},\n\t\t\t\t\t\"action.dispatch\": \"dispatching\"\n\t\t\t\t},\n\t\t\t\tdispatching: {\n\t\t\t\t\t_onEnter( luxAction ) {\n\t\t\t\t\t\tthis.actionContext = luxAction;\n\t\t\t\t\t\tif ( luxAction.generations.length ) {\n\t\t\t\t\t\t\tfor ( const generation of luxAction.generations ) {\n\t\t\t\t\t\t\t\tprocessGeneration.call( luxAction, generation, luxAction.action );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.transition( luxAction, \"notifying\" );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.transition( luxAction, \"nothandled\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"action.handled\"( luxAction, data ) {\n\t\t\t\t\t\tif ( data.hasChanged ) {\n\t\t\t\t\t\t\tluxAction.updated.push( data.namespace );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t_onExit( luxAction ) {\n\t\t\t\t\t\tif ( luxAction.updated.length ) {\n\t\t\t\t\t\t\tdispatcherChannel.publish( \"prenotify\", { stores: luxAction.updated } );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tnotifying: {\n\t\t\t\t\t_onEnter( luxAction ) {\n\t\t\t\t\t\tdispatcherChannel.publish( \"notify\", {\n\t\t\t\t\t\t\taction: luxAction.action\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tnothandled: {}\n\t\t\t},\n\t\t\tgetStoresHandling( actionType ) {\n\t\t\t\tconst stores = this.actionMap[ actionType ] || [];\n\t\t\t\treturn {\n\t\t\t\t\tstores,\n\t\t\t\t\tgenerations: buildGenerations( stores, actionType )\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\t\tthis.createSubscribers();\n\t// eslint-enable object-shorthand\n\t}\n\n\thandleActionDispatch( data ) {\n\t\tconst luxAction = Object.assign(\n\t\t\t{ action: data, generationIndex: 0, updated: [] },\n\t\t\tthis.getStoresHandling( data.actionType )\n\t\t);\n\t\tthis.handle( luxAction, \"action.dispatch\" );\n\t}\n\n\tregisterStore( storeMeta ) {\n\t\tfor ( const actionDef of storeMeta.actions ) {\n\t\t\tconst actionName = actionDef.actionType;\n\t\t\tconst actionMeta = {\n\t\t\t\tnamespace: storeMeta.namespace,\n\t\t\t\twaitFor: actionDef.waitFor\n\t\t\t};\n\t\t\tconst action = this.actionMap[ actionName ] = this.actionMap[ actionName ] || [];\n\t\t\taction.push( actionMeta );\n\t\t}\n\t}\n\n\tremoveStore( namespace ) {\n\t\tfunction isThisNameSpace( meta ) {\n\t\t\treturn meta.namespace === namespace;\n\t\t}\n\t\t/*eslint-disable */\n\t\tfor ( let [ k, v ] of entries( this.actionMap ) ) {\n\t\t\tlet idx = v.findIndex( isThisNameSpace );\n\t\t\tif ( idx !== -1 ) {\n\t\t\t\tv.splice( idx, 1 );\n\t\t\t}\n\t\t}\n\t\t/*eslint-enable */\n\t}\n\n\tcreateSubscribers() {\n\t\tthis.__subscriptions = [\n\t\t\tactionChannel.subscribe(\n\t\t\t\t\"execute.*\",\n\t\t\t\t( data, env ) => this.handleActionDispatch( data )\n\t\t\t),\n\t\t\tdispatcherChannel.subscribe(\n\t\t\t\t\"*.handled.*\",\n\t\t\t\tdata => this.handle( this.actionContext, \"action.handled\", data )\n\t\t\t).constraint( () => !!this.actionContext )\n\t\t];\n\t}\n\n\tdispose() {\n\t\tif ( this.__subscriptions ) {\n\t\t\tthis.__subscriptions.forEach( subscription => subscription.unsubscribe() );\n\t\t\tthis.__subscriptions = null;\n\t\t}\n\t}\n}\n\nexport default new Dispatcher();\n\n","// **********************************************\n// *   Generalized Mixin Behavior for non-lux   *\n// **********************************************\n\nimport { storeMixin, storeReactMixin } from \"./store\";\nimport { actionCreatorMixin, actionCreatorReactMixin, dispatch } from \"./actionCreator\";\nimport { actionListenerMixin } from \"./actionListener\";\nimport luxWrapper from \"./luxWrapper\";\n\nfunction mixin( context, ...mixins ) {\n\tif ( mixins.length === 0 ) {\n\t\tmixins = [ storeMixin, actionCreatorMixin ];\n\t}\n\n\tmixins.forEach( mxn => {\n\t\tif ( typeof mxn === \"function\" ) {\n\t\t\tmxn = mxn();\n\t\t}\n\t\tif ( mxn.mixin ) {\n\t\t\tObject.assign( context, mxn.mixin );\n\t\t}\n\t\tif ( typeof mxn.setup !== \"function\" ) {\n\t\t\tthrow new Error( \"Lux mixins should have a setup method. Did you perhaps pass your mixins ahead of your target instance?\" );\n\t\t}\n\t\tmxn.setup.call( context );\n\t\tif ( mxn.teardown ) {\n\t\t\tcontext.__lux.cleanup.push( mxn.teardown );\n\t\t}\n\t} );\n\tcontext.luxCleanup = () => {\n\t\tcontext.__lux.cleanup.forEach( method => method.call( context ) );\n\t\tcontext.__lux.cleanup = undefined;\n\t\tdelete context.__lux.cleanup;\n\t};\n\treturn context;\n}\n\nmixin.store = storeMixin;\nmixin.actionCreator = actionCreatorMixin;\nmixin.actionListener = actionListenerMixin;\n\nconst reactMixin = {\n\tactionCreator: actionCreatorReactMixin,\n\tstore: storeReactMixin\n};\n\nfunction actionListener( target ) {\n\treturn mixin( target, actionListenerMixin );\n}\n\nfunction actionCreator( target ) {\n\treturn mixin( target, actionCreatorMixin );\n}\n\nfunction actionCreatorListener( target ) {\n\treturn actionCreator( actionListener( target ) );\n}\n\nexport {\n\tmixin,\n\treactMixin,\n\tactionListener,\n\tactionCreator,\n\tactionCreatorListener,\n\tdispatch,\n\tluxWrapper\n};\n","// *******************************************\n// *           Action Creator Mixin          *\n// *******************************************\n\nimport { entries } from \"../utils\";\nimport { getActionGroup, actions } from \"../actions\";\n\nexport function dispatch( action, ...args ) {\n\tif ( actions[ action ] ) {\n\t\tactions[ action ]( ...args );\n\t} else {\n\t\tthrow new Error( `There is no action named '${action}'` );\n\t}\n}\n\nexport const actionCreatorMixin = {\n\tsetup() {\n\t\tthis.getActionGroup = this.getActionGroup || [];\n\t\tthis.getActions = this.getActions || [];\n\n\t\tif ( typeof this.getActions === \"string\" ) {\n\t\t\tthis.getActions = [ this.getActions ];\n\t\t}\n\n\t\tconst addActionIfNotPresent = ( k, v ) => {\n\t\t\tif ( !this[ k ] ) {\n\t\t\t\tthis[ k ] = v;\n\t\t\t}\n\t\t};\n\t\tthis.getActionGroup.forEach( group => {\n\t\t\tfor ( const [ k, v ] of entries( getActionGroup( group ) ) ) {\n\t\t\t\taddActionIfNotPresent( k, v );\n\t\t\t}\n\t\t} );\n\n\t\tif ( this.getActions.length ) {\n\t\t\tthis.getActions.forEach( function( key ) {\n\t\t\t\taddActionIfNotPresent( key, function() {\n\t\t\t\t\tdispatch( key, ...arguments );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t},\n\tmixin: { dispatch }\n};\n\nexport const actionCreatorReactMixin = {\n\tcomponentWillMount: actionCreatorMixin.setup,\n\tdispatch\n};\n","\n\n/* istanbul ignore next */\nif ( !( typeof global === \"undefined\" ? window : global )._babelPolyfill ) {\n\tthrow new Error( \"You must include the babel polyfill on your page before lux is loaded. See https://babeljs.io/docs/usage/polyfill/ for more details.\" );\n}\n\nimport utils from \"./utils\";\n\nimport {\n\tgetActionGroup,\n\tcustomActionCreator,\n\tactions\n} from \"./actions\";\n\nimport {\n\tmixin,\n\treactMixin,\n\tactionListener,\n\tactionCreator,\n\tactionCreatorListener,\n\tdispatch,\n\tluxWrapper\n} from \"./mixins\";\n\n/* istanbul ignore next */\nfunction publishAction( ...args ) {\n\t/* eslint-disable no-console */\n\tif ( console && typeof console.log === \"function\" ) {\n\t\tconsole.log( \"lux.publishAction has been deprecated and will be removed in future releases. Please use lux.dispatch.\" );\n\t}\n\t/* eslint-enable no-console */\n\tdispatch( ...args );\n}\n\nimport { Store, stores, removeStore } from \"./store\";\n\nimport dispatcher from \"./dispatcher\";\n\nexport default {\n\tactions,\n\tcustomActionCreator,\n\tdispatch,\n\tpublishAction,\n\tdispatcher,\n\tgetActionGroup,\n\tactionCreatorListener,\n\tactionCreator,\n\tactionListener,\n\tmixin,\n\treactMixin,\n\tremoveStore,\n\tStore,\n\tstores,\n\tutils,\n\tluxWrapper\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// NOTE - these will eventually live in their own add-on lib or in a debug build of lux\n\n/* eslint  \"no-console\":\"off\" */\n\nimport { actions, getGroupsWithAction } from \"./actions\";\nimport dispatcher from \"./dispatcher\";\n\nexport function printActions() {\n\tconst actionList = Object.keys( actions )\n\t\t.map( function( x ) {\n\t\t\treturn {\n\t\t\t\t\"action name\": x,\n\t\t\t\tstores: dispatcher.getStoresHandling( x ).stores.map( function( s ) {\n\t\t\t\t\treturn s.namespace;\n\t\t\t\t} ).join( \",\" ),\n\t\t\t\tgroups: getGroupsWithAction( x ).join( \",\" )\n\t\t\t};\n\t\t} );\n\tif ( console && console.table ) {\n\t\tconsole.group( \"Currently Recognized Actions\" );\n\t\tconsole.table( actionList );\n\t\tconsole.groupEnd();\n\t} else if ( console && console.log ) {\n\t\tconsole.log( actionList );\n\t}\n}\n\nexport function printStoreDepTree( actionType ) {\n\tlet tree = [];\n\tactionType = typeof actionType === \"string\" ? [ actionType ] : actionType;\n\tif ( !actionType ) {\n\t\tactionType = Object.keys( actions );\n\t}\n\tactionType.forEach( function( at ) {\n\t\tdispatcher.getStoresHandling( at )\n\t\t\t.generations.forEach( function( x ) {\n\t\t\t\twhile ( x.length ) {\n\t\t\t\t\tconst t = x.pop();\n\t\t\t\t\ttree.push( {\n\t\t\t\t\t\t\"action type\": at,\n\t\t\t\t\t\t\"store namespace\": t.namespace,\n\t\t\t\t\t\t\"waits for\": t.waitFor.join( \",\" ),\n\t\t\t\t\t\tgeneration: t.gen\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\tif ( console && console.table ) {\n\t\t\tconsole.group( `Store Dependency List for ${at}` );\n\t\t\tconsole.table( tree );\n\t\t\tconsole.groupEnd();\n\t\t} else if ( console && console.log ) {\n\t\t\tconsole.log( `Store Dependency List for ${at}:` );\n\t\t\tconsole.log( tree );\n\t\t}\n\t\ttree = [];\n\t} );\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__10__;","module.exports = __WEBPACK_EXTERNAL_MODULE__11__;","// **********************************************\n// *                 Store Mixin                *\n// **********************************************\n\nimport { storeChannel, dispatcherChannel } from \"../bus\";\nimport { ensureLuxProp, entries } from \"../utils\";\n\nfunction gateKeeper( instance, store, data ) {\n\tconst payload = {};\n\tpayload[ store ] = true;\n\tconst __lux = instance.__lux;\n\n\tconst found = __lux.waitFor.indexOf( store );\n\n\tif ( found > -1 ) {\n\t\t__lux.waitFor.splice( found, 1 );\n\t\t__lux.heardFrom.push( payload );\n\n\t\tif ( __lux.waitFor.length === 0 ) {\n\t\t\t__lux.heardFrom = [];\n\t\t\tinstance.stores.onChange.call( instance, payload );\n\t\t}\n\t}\n}\n\nfunction handlePreNotify( instance, data ) {\n\tinstance.__lux.waitFor = data.stores.filter(\n\t\titem => instance.stores.listenTo.indexOf( item ) > -1\n\t);\n}\n\nexport const storeMixin = {\n\tsetup() {\n\t\tconst __lux = ensureLuxProp( this );\n\t\tconst stores = this.stores;\n\t\tif ( !stores ) {\n\t\t\tthrow new Error( \"Your component must provide a \\\"stores\\\" key\" );\n\t\t}\n\n\t\tif ( !stores.listenTo || !stores.listenTo.length ) {\n\t\t\tthrow new Error( \"listenTo must contain at least one store namespace\" );\n\t\t}\n\n\t\tconst listenTo = typeof stores.listenTo === \"string\" ? [ stores.listenTo ] : stores.listenTo;\n\n\t\tif ( !stores.onChange ) {\n\t\t\tthrow new Error( `A component was told to listen to the following store(s): ${listenTo} but no onChange handler was implemented` );\n\t\t}\n\n\t\t__lux.waitFor = [];\n\t\t__lux.heardFrom = [];\n\n\t\tlistenTo.forEach( store => {\n\t\t\t__lux.subscriptions[ `${store}.changed` ] = storeChannel.subscribe( `${store}.changed`, () => gateKeeper( this, store ) );\n\t\t} );\n\n\t\t__lux.subscriptions.prenotify = dispatcherChannel.subscribe( \"prenotify\", data => handlePreNotify( this, data ) );\n\t},\n\tteardown() {\n\t\tfor ( const [ key, sub ] of entries( this.__lux.subscriptions ) ) {\n\t\t\tlet split;\n\t\t\t// eslint-disable-next-line no-cond-assign\n\t\t\tif ( key === \"prenotify\" || ( ( split = key.split( \".\" ) ) && split.pop() === \"changed\" ) ) {\n\t\t\t\tsub.unsubscribe();\n\t\t\t}\n\t\t}\n\t},\n\tmixin: {}\n};\n\nexport const storeReactMixin = {\n\tcomponentWillMount: storeMixin.setup,\n\tcomponentWillUnmount: storeMixin.teardown\n};\n\n","// **********************************************\n// *            Action Listener Mixin           *\n// **********************************************\n\nimport { actionChannel } from \"../bus\";\nimport { ensureLuxProp } from \"../utils\";\nimport { generateActionCreator, addToActionGroup } from \"../actions\";\n\nexport function actionListenerMixin( { handlers, handlerFn, context, channel, topic } = {} ) {\n\treturn {\n\t\tsetup() {\n\t\t\tcontext = context || this;\n\t\t\tconst __lux = ensureLuxProp( context );\n\t\t\tconst subs = __lux.subscriptions;\n\t\t\thandlers = handlers || context.handlers;\n\t\t\tchannel = channel || actionChannel;\n\t\t\ttopic = topic || \"execute.*\";\n\t\t\thandlerFn = handlerFn || ( ( data, env ) => {\n\t\t\t\tconst handler = handlers[ data.actionType ];\n\t\t\t\tif ( handler ) {\n\t\t\t\t\thandler.apply( context, data.actionArgs );\n\t\t\t\t}\n\t\t\t} );\n\t\t\tif ( !handlers || !Object.keys( handlers ).length ) {\n\t\t\t\tthrow new Error( \"You must have at least one action handler in the handlers property\" );\n\t\t\t} else if ( subs && subs.actionListener ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsubs.actionListener = channel.subscribe( topic, handlerFn ).context( context );\n\t\t\tconst handlerKeys = Object.keys( handlers );\n\t\t\tgenerateActionCreator( handlerKeys );\n\t\t\tif ( context.namespace ) {\n\t\t\t\taddToActionGroup( context.namespace, handlerKeys );\n\t\t\t}\n\t\t},\n\t\tteardown() {\n\t\t\tthis.__lux.subscriptions.actionListener.unsubscribe();\n\t\t}\n\t};\n}\n","// **********************************************\n// *   Generalized Mixin Behavior for non-lux   *\n// **********************************************\n\nimport React from \"react\";\nimport { setupStoreListener, setupActionMap } from \"./wrapperUtils\";\nimport { entries } from \"../utils\";\n\nexport default function luxWrapper( Component, {\n\tactions,\n\tstores,\n\tgetState,\n\tpureComponent = false,\n\tcomponentWillMount,\n\tcomponentDidMount,\n\tcomponentWillReceiveProps,\n\tcomponentWillUpdate,\n\tcomponentDidUpdate,\n\tcomponentWillUnmount\n} ) {\n\tfunction getComponentState( instance, props ) {\n\t\tconst initialPayload = ( stores || [] ).reduce( ( m, s ) => {\n\t\t\tm[ s ] = true;\n\t\t\treturn m;\n\t\t}, {} );\n\t\treturn getState( props, initialPayload );\n\t}\n\n\tclass LuxWrapper extends React[ pureComponent ? \"PureComponent\" : \"Component\" ] {\n\t\tconstructor( props, context ) {\n\t\t\tsuper( props, context );\n\t\t\tsetupStoreListener( this, { stores, getState } );\n\t\t\tsetupActionMap( this, { actions } );\n\t\t\tif ( getState ) {\n\t\t\t\tthis.state = getComponentState( this, props );\n\t\t\t}\n\t\t}\n\n\t\t// eslint-disable-next-line camelcase\n\t\tUNSAFE_componentWillMount( ...args ) {\n\t\t\tif ( componentWillMount ) {\n\t\t\t\tcomponentWillMount.apply( this, args );\n\t\t\t}\n\t\t}\n\n\t\tcomponentDidMount( ...args ) {\n\t\t\tif ( componentDidMount ) {\n\t\t\t\tcomponentDidMount.apply( this, args );\n\t\t\t}\n\t\t}\n\n\t\t// eslint-disable-next-line camelcase\n\t\tUNSAFE_componentWillReceiveProps( ...args ) {\n\t\t\tif ( getState ) {\n\t\t\t\tthis.setState( getComponentState( this, ...args ) );\n\t\t\t}\n\t\t\tif ( componentWillReceiveProps ) {\n\t\t\t\tcomponentWillReceiveProps.apply( this, args );\n\t\t\t}\n\t\t}\n\n\t\t// eslint-disable-next-line camelcase\n\t\tUNSAFE_componentWillUpdate( ...args ) {\n\t\t\tif ( componentWillUpdate ) {\n\t\t\t\tcomponentWillUpdate.apply( this, args );\n\t\t\t}\n\t\t}\n\n\t\tcomponentDidUpdate( ...args ) {\n\t\t\tif ( componentDidUpdate ) {\n\t\t\t\tcomponentDidUpdate.apply( this, args );\n\t\t\t}\n\t\t}\n\n\t\tcomponentWillUnmount( ...args ) {\n\t\t\tif ( componentWillUnmount ) {\n\t\t\t\tcomponentWillUnmount.apply( this, args );\n\t\t\t}\n\t\t\tfor ( const [ key, sub ] of entries( this.__lux.subscriptions ) ) {\n\t\t\t\tlet split;\n\t\t\t\t// eslint-disable-next-line no-cond-assign\n\t\t\t\tif ( key === \"prenotify\" || ( ( split = key.split( \".\" ) ) && split.pop() === \"changed\" ) ) {\n\t\t\t\t\tsub.unsubscribe();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\trender() {\n\t\t\treturn React.createElement(\n\t\t\t\tComponent,\n\t\t\t\tObject.assign(\n\t\t\t\t\t{},\n\t\t\t\t\tthis.props,\n\t\t\t\t\tthis.propToAction,\n\t\t\t\t\tthis.state\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tLuxWrapper.displayName = `LuxWrapped(${ Component.displayName || \"Component\" })`;\n\n\treturn LuxWrapper;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__15__;","// **********************************************\n// *   wrapper utilities                        *\n// **********************************************\n\nimport { ensureLuxProp, entries } from \"../utils\";\nimport { storeChannel, dispatcherChannel } from \"../bus\";\nimport { dispatch } from \"./actionCreator\";\nimport { isString, isFunction } from \"lodash\";\n\nexport function gateKeeper( instance, { getState }, store ) {\n\tconst payload = {};\n\tpayload[ store ] = true;\n\tconst __lux = instance.__lux;\n\n\tconst found = __lux.waitFor.indexOf( store );\n\n\tif ( found > -1 ) {\n\t\t__lux.waitFor.splice( found, 1 );\n\t\t__lux.heardFrom.push( payload );\n\n\t\tif ( __lux.waitFor.length === 0 ) {\n\t\t\t__lux.heardFrom = [];\n\t\t\tinstance.setState( getState( instance.props, payload ) );\n\t\t}\n\t}\n}\n\nexport function handlePreNotify( instance, stores, data ) {\n\tinstance.__lux.waitFor = data.stores.filter(\n\t\titem => stores.indexOf( item ) > -1\n\t);\n}\n\nexport function setupStoreListener( instance, { stores, getState } ) {\n\tconst __lux = ensureLuxProp( instance );\n\t__lux.waitFor = [];\n\t__lux.heardFrom = [];\n\n\tif ( stores && stores.length ) {\n\t\tstores.forEach( store => {\n\t\t\t__lux.subscriptions[ `${ store }.changed` ] = storeChannel.subscribe(\n\t\t\t\t`${ store }.changed`,\n\t\t\t\t() => gateKeeper( instance, { getState }, store )\n\t\t\t);\n\t\t} );\n\n\t\t__lux.subscriptions.prenotify = dispatcherChannel.subscribe(\n\t\t\t\"prenotify\",\n\t\t\tdata => handlePreNotify( instance, stores, data )\n\t\t);\n\t}\n}\n\nexport function isSyntheticEvent( e ) {\n\treturn e.hasOwnProperty( \"eventPhase\" ) &&\n\t\te.hasOwnProperty( \"nativeEvent\" ) &&\n\t\te.hasOwnProperty( \"target\" ) &&\n\t\te.hasOwnProperty( \"type\" );\n}\n\nexport function getDefaultActionCreator( action ) {\n\tif ( Object.prototype.toString.call( action ) === \"[object String]\" ) {\n\t\treturn function( e, ...args ) {\n\t\t\tif ( !isSyntheticEvent( e ) ) {\n\t\t\t\targs.unshift( e );\n\t\t\t}\n\t\t\tdispatch( action, ...args );\n\t\t};\n\t}\n\treturn undefined;\n}\n\nexport function setupActionMap( instance, { actions } ) {\n\tinstance.propToAction = {};\n\tfor ( const [ childProp, action ] of entries( actions || {} ) ) {\n\t\tlet actionCreator = action; // assumes function by default\n\t\tif ( isString( action ) ) {\n\t\t\tactionCreator = getDefaultActionCreator( action );\n\t\t} else if ( !isFunction( action ) ) {\n\t\t\tthrow new Error( \"The values provided to the luxWrapper actions parameter must be a string or a function\" );\n\t\t}\n\t\tinstance.propToAction[ childProp ] = actionCreator;\n\t}\n}\n","import { storeChannel, dispatcherChannel } from \"./bus\";\nimport { entries } from \"./utils\";\nimport dispatcher from \"./dispatcher\";\nimport _ from \"lodash\";\nimport { mixin } from \"./mixins\";\n\nexport const stores = {};\n\nfunction buildActionList( handlers ) {\n\tconst actionList = [];\n\tfor ( const [ key, handler ] of entries( handlers ) ) {\n\t\tactionList.push( {\n\t\t\tactionType: key,\n\t\t\twaitFor: handler.waitFor || []\n\t\t} );\n\t}\n\treturn actionList;\n}\n\nfunction ensureStoreOptions( options, handlers, store ) {\n\tconst namespace = ( options && options.namespace ) || store.namespace;\n\tif ( namespace in stores ) {\n\t\tthrow new Error( `The store namespace \"${namespace}\" already exists.` );\n\t}\n\tif ( !namespace ) {\n\t\tthrow new Error( \"A lux store must have a namespace value provided\" );\n\t}\n\tif ( !handlers || !Object.keys( handlers ).length ) {\n\t\tthrow new Error( \"A lux store must have action handler methods provided\" );\n\t}\n}\n\nfunction getHandlerObject( key, listeners ) {\n\treturn {\n\t\twaitFor: [],\n\t\thandler() {\n\t\t\tlet changed = 0;\n\t\t\tconst args = Array.from( arguments );\n\t\t\tlisteners[ key ].forEach( function( listener ) {\n\t\t\t\tchanged += ( listener.apply( this, args ) === false ? 0 : 1 );\n\t\t\t}.bind( this ) );\n\t\t\treturn changed > 0;\n\t\t}\n\t};\n}\n\nfunction updateWaitFor( source, handlerObject ) {\n\tif ( source.waitFor ) {\n\t\tsource.waitFor.forEach( function( dep ) {\n\t\t\tif ( handlerObject.waitFor.indexOf( dep ) === -1 ) {\n\t\t\t\thandlerObject.waitFor.push( dep );\n\t\t\t}\n\t\t} );\n\t}\n}\n\nfunction addListeners( listeners, key, handler ) {\n\tlisteners[ key ] = listeners[ key ] || [];\n\tlisteners[ key ].push( handler.handler || handler );\n}\n\nfunction processStoreArgs( ...options ) {\n\tconst listeners = {};\n\tconst handlers = {};\n\tconst state = {};\n\tconst otherOpts = {};\n\toptions.forEach( function( o ) {\n\t\tlet opt;\n\t\tif ( o ) {\n\t\t\topt = _.clone( o );\n\t\t\t_.merge( state, opt.state );\n\t\t\tif ( opt.handlers ) {\n\t\t\t\tObject.keys( opt.handlers ).forEach( function( key ) {\n\t\t\t\t\tconst handler = opt.handlers[ key ];\n\t\t\t\t\t// set up the actual handler method that will be executed\n\t\t\t\t\t// as the store handles a dispatched action\n\t\t\t\t\thandlers[ key ] = handlers[ key ] || getHandlerObject( key, listeners );\n\t\t\t\t\t// ensure that the handler definition has a list of all stores\n\t\t\t\t\t// being waited upon\n\t\t\t\t\tupdateWaitFor( handler, handlers[ key ] );\n\t\t\t\t\t// Add the original handler method(s) to the listeners queue\n\t\t\t\t\taddListeners( listeners, key, handler );\n\t\t\t\t} );\n\t\t\t}\n\t\t\tdelete opt.handlers;\n\t\t\tdelete opt.state;\n\t\t\t_.merge( otherOpts, opt );\n\t\t}\n\t} );\n\treturn [ state, handlers, otherOpts ];\n}\n\nexport class Store {\n\n\tconstructor( ...opt ) {\n\t\tlet [ state, handlers, options ] = processStoreArgs( ...opt );  // eslint-disable-line prefer-const\n\t\tensureStoreOptions( options, handlers, this );\n\t\tconst namespace = options.namespace;\n\t\tObject.assign( this, options );\n\t\tstores[ namespace ] = this;\n\t\tlet inDispatch = false;\n\t\tthis.hasChanged = false;\n\n\t\tthis.getState = function() {\n\t\t\treturn state;\n\t\t};\n\n\t\tthis.setState = function( newState ) {\n\t\t\tif ( !inDispatch ) {\n\t\t\t\tthrow new Error( \"setState can only be called during a dispatch cycle from a store action handler.\" );\n\t\t\t}\n\t\t\tstate = Object.assign( state, newState );\n\t\t};\n\n\t\tthis.replaceState = function( newState ) {\n\t\t\tif ( !inDispatch ) {\n\t\t\t\tthrow new Error( \"replaceState can only be called during a dispatch cycle from a store action handler.\" );\n\t\t\t}\n\t\t\t// we preserve the underlying state ref, but clear it\n\t\t\tObject.keys( state ).forEach( function( key ) {\n\t\t\t\tdelete state[ key ];\n\t\t\t} );\n\t\t\tstate = Object.assign( state, newState );\n\t\t};\n\n\t\tthis.flush = function flush() {\n\t\t\tinDispatch = false;\n\t\t\tif ( this.hasChanged ) {\n\t\t\t\tthis.hasChanged = false;\n\t\t\t\tstoreChannel.publish( `${this.namespace}.changed` );\n\t\t\t}\n\t\t};\n\n\t\tmixin( this, mixin.actionListener( {\n\t\t\tcontext: this,\n\t\t\tchannel: dispatcherChannel,\n\t\t\ttopic: `${namespace}.handle.*`,\n\t\t\thandlers,\n\t\t\thandlerFn: function( data ) {\n\t\t\t\tif ( handlers.hasOwnProperty( data.actionType ) ) {\n\t\t\t\t\tinDispatch = true;\n\t\t\t\t\tconst res = handlers[ data.actionType ].handler.apply( this, data.actionArgs.concat( data.deps ) );\n\t\t\t\t\tthis.hasChanged = !( res === false );\n\t\t\t\t\tdispatcherChannel.publish(\n\t\t\t\t\t\t`${this.namespace}.handled.${data.actionType}`,\n\t\t\t\t\t\t{ hasChanged: this.hasChanged, namespace: this.namespace }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}.bind( this )\n\t\t} ) );\n\n\t\tthis.__subscription = {\n\t\t\tnotify: dispatcherChannel.subscribe( \"notify\", () => this.flush() )\n\t\t\t\t\t.constraint( () => inDispatch )\n\t\t};\n\n\t\tdispatcher.registerStore(\n\t\t\t{\n\t\t\t\tnamespace,\n\t\t\t\tactions: buildActionList( handlers )\n\t\t\t}\n\t\t);\n\t}\n\n\t// Need to build in behavior to remove this store\n\t// from the dispatcher's actionMap as well!\n\tdispose() {\n\t\t/*eslint-disable */\n\t\tfor ( let [ k, subscription ] of entries( this.__subscription ) ) {\n\t\t\tsubscription.unsubscribe();\n\t\t}\n\t\t/*eslint-enable */\n\t\tdelete stores[ this.namespace ];\n\t\tdispatcher.removeStore( this.namespace );\n\t\tthis.luxCleanup();\n\t}\n}\n\nexport function removeStore( namespace ) {\n\tstores[ namespace ].dispose();\n}\n"],"sourceRoot":""}