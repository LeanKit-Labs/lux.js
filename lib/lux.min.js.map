{"version":3,"sources":["webpack://lux/webpack/universalModuleDefinition","webpack://lux/webpack/bootstrap","webpack://lux/./src/utils.js","webpack://lux/./src/bus.js","webpack://lux/./src/actions.js","webpack://lux/external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}","webpack://lux/./src/dispatcher.js","webpack://lux/./src/mixins/index.js","webpack://lux/./src/mixins/actionCreator.js","webpack://lux/./src/lux.js","webpack://lux/(webpack)/buildin/global.js","webpack://lux/./src/printUtils.js","webpack://lux/external \"postal\"","webpack://lux/external \"machina\"","webpack://lux/./src/mixins/store.js","webpack://lux/./src/mixins/actionListener.js","webpack://lux/./src/mixins/luxWrapper.js","webpack://lux/external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack://lux/./src/mixins/wrapperUtils.js","webpack://lux/./src/store.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__10__","__WEBPACK_EXTERNAL_MODULE__11__","__WEBPACK_EXTERNAL_MODULE__15__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ensureLuxProp","context","__lux","cleanup","subscriptions","entries","obj","indexOf","keys","k","printActions","printStoreDepTree","actionChannel","postal","channel","storeChannel","dispatcherChannel","generateActionCreator","actionList","forEach","action","actions","args","Array","from","arguments","publish","topic","data","actionType","actionArgs","getActionGroup","group","actionGroups","_","pick","Error","getGroupsWithAction","actionName","groups","push","customActionCreator","assign","addToActionGroup","groupName","diff","difference","length","join","buildGenerations","stores","tree","lookup","store","namespace","gen","calculateGen","namespaces","calcdGen","_namespaces","waitFor","dep","depStore","thisGen","console","warn","item","processGeneration","generation","map","deps","Dispatcher","initialState","actionMap","states","ready","_onEnter","this","actionContext","undefined","dispatching","luxAction","generations","transition","hasChanged","updated","_onExit","notifying","nothandled","getStoresHandling","createSubscribers","generationIndex","handle","storeMeta","actionDef","actionMeta","isThisNameSpace","meta","v","idx","findIndex","splice","__subscriptions","subscribe","handleActionDispatch","constraint","subscription","unsubscribe","machina","BehavioralFsm","mixin","mixins","storeMixin","actionCreatorMixin","mxn","setup","teardown","luxCleanup","method","actionCreator","actionListener","actionListenerMixin","reactMixin","actionCreatorReactMixin","storeReactMixin","target","actionCreatorListener","dispatch","luxWrapper","getActions","addActionIfNotPresent","componentWillMount","global","_babelPolyfill","publishAction","log","dispatcher","removeStore","Store","utils","g","Function","e","x","table","groupEnd","at","pop","listenTo","onChange","heardFrom","instance","payload","found","gateKeeper","prenotify","filter","handlePreNotify","sub","split","componentWillUnmount","handlers","handlerFn","subs","handler","apply","handlerKeys","Component","getState","pureComponent","componentDidMount","componentWillReceiveProps","componentWillUpdate","componentDidUpdate","getComponentState","props","initialPayload","reduce","LuxWrapper","setupStoreListener","setupActionMap","state","setState","React","createElement","propToAction","displayName","isSyntheticEvent","getDefaultActionCreator","childProp","isString","isFunction","toString","unshift","dispose","buildActionList","processStoreArgs","listeners","otherOpts","options","opt","clone","merge","source","handlerObject","changed","listener","getHandlerObject","addListeners","ensureStoreOptions","inDispatch","newState","replaceState","flush","res","concat","__subscription","notify","registerStore"],"mappings":"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","file":"lux.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"postal\"), require(\"machina\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"postal\", \"machina\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lux\"] = factory(require(\"lodash\"), require(\"postal\"), require(\"machina\"), require(\"react\"));\n\telse\n\t\troot[\"lux\"] = factory(root[\"_\"], root[\"postal\"], root[\"machina\"], root[\"React\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__10__, __WEBPACK_EXTERNAL_MODULE__11__, __WEBPACK_EXTERNAL_MODULE__15__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./js/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","import { printActions, printStoreDepTree } from \"./printUtils\";\n\nexport function ensureLuxProp( context ) {\n\tconst __lux = context.__lux = ( context.__lux || {} );\n\t/*eslint-disable */\n\tconst cleanup = __lux.cleanup = ( __lux.cleanup || [] );\n\tconst subscriptions = __lux.subscriptions = ( __lux.subscriptions || {} );\n\t/* eslint-enable */\n\treturn __lux;\n}\n\nexport function *entries( obj ) {\n\tif ( [ \"object\", \"function\" ].indexOf( typeof obj ) === -1 ) {\n\t\tobj = {};\n\t}\n\tfor ( const k of Object.keys( obj ) ) {\n\t\tyield[ k, obj[ k ] ];\n\t}\n}\n\nexport default { printActions, printStoreDepTree };\n","import postal from \"postal\";\n\nconst actionChannel = postal.channel( \"lux.action\" );\nconst storeChannel = postal.channel( \"lux.store\" );\nconst dispatcherChannel = postal.channel( \"lux.dispatcher\" );\n\nexport {\n\tactionChannel,\n\tstoreChannel,\n\tdispatcherChannel,\n\tpostal\n};\n","import _ from \"lodash\";\nimport { entries } from \"./utils\";\nimport { actionChannel } from \"./bus\";\nexport const actions = Object.create( null );\nexport const actionGroups = Object.create( null );\n\nexport function generateActionCreator( actionList ) {\n\tactionList.forEach( function( action ) {\n\t\tif ( !actions[ action ] ) {\n\t\t\tactions[ action ] = function() {\n\t\t\t\tconst args = Array.from( arguments );\n\t\t\t\tactionChannel.publish( {\n\t\t\t\t\ttopic: `execute.${ action }`,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tactionType: action,\n\t\t\t\t\t\tactionArgs: args\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t};\n\t\t}\n\t} );\n}\n\n// This method is deprecated, but will remain as\n// long as the print utils need it.\n/* istanbul ignore next */\nexport function getActionGroup( group ) {\n\tif ( actionGroups[ group ] ) {\n\t\treturn _.pick( actions, actionGroups[ group ] );\n\t}\n\tthrow new Error( `There is no action group named '${ group }'` );\n}\n\n// This method is deprecated, but will remain as\n// long as the print utils need it.\n/* istanbul ignore next */\nexport function getGroupsWithAction( actionName ) {\n\tconst groups = [];\n\tfor ( const [ group, list ] of entries( actionGroups ) ) {\n\t\tif ( list.indexOf( actionName ) >= 0 ) {\n\t\t\tgroups.push( group );\n\t\t}\n\t}\n\treturn groups;\n}\n\nexport function customActionCreator( action ) {\n\tObject.assign( actions, action );\n}\n\n// This method is deprecated, but will remain as\n// long as the print utils need it.\n/* istanbul ignore next */\nexport function addToActionGroup( groupName, actionList ) {\n\tlet group = actionGroups[ groupName ];\n\tif ( !group ) {\n\t\tgroup = actionGroups[ groupName ] = [];\n\t}\n\tactionList = typeof actionList === \"string\" ? [ actionList ] : actionList;\n\tconst diff = _.difference( actionList, Object.keys( actions ) );\n\tif ( diff.length ) {\n\t\tthrow new Error( `The following actions do not exist: ${ diff.join( \", \" ) }` );\n\t}\n\tactionList.forEach( function( action ) {\n\t\tif ( group.indexOf( action ) === -1 ) {\n\t\t\tgroup.push( action );\n\t\t}\n\t} );\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","\nimport _ from \"lodash\";\nimport { dispatcherChannel, actionChannel } from \"./bus\";\nimport { entries } from \"./utils\";\nimport machina from \"machina\";\n\nfunction calculateGen( store, lookup, gen, actionType, namespaces ) {\n\tlet calcdGen = gen;\n\tconst _namespaces = namespaces || [];\n\tif ( _namespaces.indexOf( store.namespace ) > -1 ) {\n\t\tthrow new Error( `Circular dependency detected for the \"${ store.namespace }\" store when participating in the \"${ actionType }\" action.` );\n\t}\n\tif ( store.waitFor && store.waitFor.length ) {\n\t\tstore.waitFor.forEach( function( dep ) {\n\t\t\tconst depStore = lookup[ dep ];\n\t\t\tif ( depStore ) {\n\t\t\t\t_namespaces.push( store.namespace );\n\t\t\t\tconst thisGen = calculateGen( depStore, lookup, gen + 1, actionType, _namespaces );\n\t\t\t\tif ( thisGen > calcdGen ) {\n\t\t\t\t\tcalcdGen = thisGen;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tconsole.warn( `The \"${actionType}\" action in the \"${store.namespace}\" store waits for \"${dep}\" but a store with that namespace does not participate in this action.` );\n\t\t\t}\n\t\t} );\n\t}\n\treturn calcdGen;\n}\n\nfunction buildGenerations( stores, actionType ) {\n\tconst tree = [];\n\tconst lookup = {};\n\t/*eslint-disable */\n\tstores.forEach( store => lookup[ store.namespace ] = store );\n\tstores.forEach( store => store.gen = calculateGen( store, lookup, 0, actionType ) );\n\tfor ( let [ key, item ] of entries( lookup ) ) {\n\t\ttree[ item.gen ] = tree[ item.gen ] || [];\n\t\ttree[ item.gen ].push( item );\n\t}\n\t/* eslint-enable */\n\treturn tree;\n}\n\nfunction processGeneration( generation, action ) {\n\tgeneration.map( store => {\n\t\tconst data = Object.assign( {\n\t\t\tdeps: _.pick( this.stores, store.waitFor ) // eslint-disable-line no-invalid-this\n\t\t}, action );\n\t\tdispatcherChannel.publish(\n\t\t\t`${ store.namespace }.handle.${ action.actionType }`,\n\t\t\tdata\n\t\t);\n\t} );\n}\n\nclass Dispatcher extends machina.BehavioralFsm {\n\tconstructor() {\n\t\tsuper( {\n\t\t\tinitialState: \"ready\",\n\t\t\tactionMap: {},\n\t\t\tstates: {\n\t\t\t\tready: {\n\t\t\t\t\t_onEnter() {\n\t\t\t\t\t\tthis.actionContext = undefined;\n\t\t\t\t\t},\n\t\t\t\t\t\"action.dispatch\": \"dispatching\"\n\t\t\t\t},\n\t\t\t\tdispatching: {\n\t\t\t\t\t_onEnter( luxAction ) {\n\t\t\t\t\t\tthis.actionContext = luxAction;\n\t\t\t\t\t\tif ( luxAction.generations.length ) {\n\t\t\t\t\t\t\tfor ( const generation of luxAction.generations ) {\n\t\t\t\t\t\t\t\tprocessGeneration.call( luxAction, generation, luxAction.action );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.transition( luxAction, \"notifying\" );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.transition( luxAction, \"nothandled\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"action.handled\"( luxAction, data ) {\n\t\t\t\t\t\tif ( data.hasChanged ) {\n\t\t\t\t\t\t\tluxAction.updated.push( data.namespace );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t_onExit( luxAction ) {\n\t\t\t\t\t\tif ( luxAction.updated.length ) {\n\t\t\t\t\t\t\tdispatcherChannel.publish( \"prenotify\", { stores: luxAction.updated } );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tnotifying: {\n\t\t\t\t\t_onEnter( luxAction ) {\n\t\t\t\t\t\tdispatcherChannel.publish( \"notify\", {\n\t\t\t\t\t\t\taction: luxAction.action\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tnothandled: {}\n\t\t\t},\n\t\t\tgetStoresHandling( actionType ) {\n\t\t\t\tconst stores = this.actionMap[ actionType ] || [];\n\t\t\t\treturn {\n\t\t\t\t\tstores,\n\t\t\t\t\tgenerations: buildGenerations( stores, actionType )\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\t\tthis.createSubscribers();\n\t// eslint-enable object-shorthand\n\t}\n\n\thandleActionDispatch( data ) {\n\t\tconst luxAction = Object.assign(\n\t\t\t{ action: data, generationIndex: 0, updated: [] },\n\t\t\tthis.getStoresHandling( data.actionType )\n\t\t);\n\t\tthis.handle( luxAction, \"action.dispatch\" );\n\t}\n\n\tregisterStore( storeMeta ) {\n\t\tfor ( const actionDef of storeMeta.actions ) {\n\t\t\tconst actionName = actionDef.actionType;\n\t\t\tconst actionMeta = {\n\t\t\t\tnamespace: storeMeta.namespace,\n\t\t\t\twaitFor: actionDef.waitFor\n\t\t\t};\n\t\t\tconst action = this.actionMap[ actionName ] = this.actionMap[ actionName ] || [];\n\t\t\taction.push( actionMeta );\n\t\t}\n\t}\n\n\tremoveStore( namespace ) {\n\t\tfunction isThisNameSpace( meta ) {\n\t\t\treturn meta.namespace === namespace;\n\t\t}\n\t\t/*eslint-disable */\n\t\tfor ( let [ k, v ] of entries( this.actionMap ) ) {\n\t\t\tlet idx = v.findIndex( isThisNameSpace );\n\t\t\tif ( idx !== -1 ) {\n\t\t\t\tv.splice( idx, 1 );\n\t\t\t}\n\t\t}\n\t\t/* eslint-enable */\n\t}\n\n\tcreateSubscribers() {\n\t\tthis.__subscriptions = [\n\t\t\tactionChannel.subscribe(\n\t\t\t\t\"execute.*\",\n\t\t\t\tdata => this.handleActionDispatch( data )\n\t\t\t),\n\t\t\tdispatcherChannel.subscribe(\n\t\t\t\t\"*.handled.*\",\n\t\t\t\tdata => this.handle( this.actionContext, \"action.handled\", data )\n\t\t\t).constraint( () => !!this.actionContext )\n\t\t];\n\t}\n\n\tdispose() {\n\t\tif ( this.__subscriptions ) {\n\t\t\tthis.__subscriptions.forEach( subscription => subscription.unsubscribe() );\n\t\t\tthis.__subscriptions = null;\n\t\t}\n\t}\n}\n\nexport default new Dispatcher();\n\n","// **********************************************\n// *   Generalized Mixin Behavior for non-lux   *\n// **********************************************\n\nimport { storeMixin, storeReactMixin } from \"./store\";\nimport { actionCreatorMixin, actionCreatorReactMixin, dispatch } from \"./actionCreator\";\nimport { actionListenerMixin } from \"./actionListener\";\nimport luxWrapper from \"./luxWrapper\";\n\nfunction mixin( context, ...mixins ) {\n\tif ( mixins.length === 0 ) {\n\t\tmixins = [ storeMixin, actionCreatorMixin ];\n\t}\n\n\tmixins.forEach( mxn => {\n\t\tif ( typeof mxn === \"function\" ) {\n\t\t\tmxn = mxn();\n\t\t}\n\t\tif ( mxn.mixin ) {\n\t\t\tObject.assign( context, mxn.mixin );\n\t\t}\n\t\tif ( typeof mxn.setup !== \"function\" ) {\n\t\t\tthrow new Error( \"Lux mixins should have a setup method. Did you perhaps pass your mixins ahead of your target instance?\" );\n\t\t}\n\t\tmxn.setup.call( context );\n\t\tif ( mxn.teardown ) {\n\t\t\tcontext.__lux.cleanup.push( mxn.teardown );\n\t\t}\n\t} );\n\tcontext.luxCleanup = () => {\n\t\tcontext.__lux.cleanup.forEach( method => method.call( context ) );\n\t\tcontext.__lux.cleanup = undefined;\n\t\tdelete context.__lux.cleanup;\n\t};\n\treturn context;\n}\n\nmixin.store = storeMixin;\nmixin.actionCreator = actionCreatorMixin;\nmixin.actionListener = actionListenerMixin;\n\nconst reactMixin = {\n\tactionCreator: actionCreatorReactMixin,\n\tstore: storeReactMixin\n};\n\nfunction actionListener( target ) {\n\treturn mixin( target, actionListenerMixin );\n}\n\nfunction actionCreator( target ) {\n\treturn mixin( target, actionCreatorMixin );\n}\n\nfunction actionCreatorListener( target ) {\n\treturn actionCreator( actionListener( target ) );\n}\n\nexport {\n\tmixin,\n\treactMixin,\n\tactionListener,\n\tactionCreator,\n\tactionCreatorListener,\n\tdispatch,\n\tluxWrapper\n};\n","// *******************************************\n// *           Action Creator Mixin          *\n// *******************************************\n\nimport { entries } from \"../utils\";\nimport { getActionGroup, actions } from \"../actions\";\n\nexport function dispatch( action, ...args ) {\n\tif ( actions[ action ] ) {\n\t\tactions[ action ]( ...args );\n\t} else {\n\t\tthrow new Error( `There is no action named '${ action }'` );\n\t}\n}\n\nexport const actionCreatorMixin = {\n\tsetup() {\n\t\tthis.getActionGroup = this.getActionGroup || [];\n\t\tthis.getActions = this.getActions || [];\n\n\t\tif ( typeof this.getActions === \"string\" ) {\n\t\t\tthis.getActions = [ this.getActions ];\n\t\t}\n\n\t\tconst addActionIfNotPresent = ( k, v ) => {\n\t\t\tif ( !this[ k ] ) {\n\t\t\t\tthis[ k ] = v;\n\t\t\t}\n\t\t};\n\t\tthis.getActionGroup.forEach( group => {\n\t\t\tfor ( const [ k, v ] of entries( getActionGroup( group ) ) ) {\n\t\t\t\taddActionIfNotPresent( k, v );\n\t\t\t}\n\t\t} );\n\n\t\tif ( this.getActions.length ) {\n\t\t\tthis.getActions.forEach( function( key ) {\n\t\t\t\taddActionIfNotPresent( key, function() {\n\t\t\t\t\tdispatch( key, ...arguments );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t},\n\tmixin: { dispatch }\n};\n\nexport const actionCreatorReactMixin = {\n\tcomponentWillMount: actionCreatorMixin.setup,\n\tdispatch\n};\n","\n\n/* istanbul ignore next */\nif ( !( typeof global === \"undefined\" ? window : global )._babelPolyfill ) {\n\tthrow new Error( \"You must include the babel polyfill on your page before lux is loaded. See https://babeljs.io/docs/usage/polyfill/ for more details.\" );\n}\n\nimport utils from \"./utils\";\n\nimport {\n\tgetActionGroup,\n\tcustomActionCreator,\n\tactions\n} from \"./actions\";\n\nimport {\n\tmixin,\n\treactMixin,\n\tactionListener,\n\tactionCreator,\n\tactionCreatorListener,\n\tdispatch,\n\tluxWrapper\n} from \"./mixins\";\n\n/* istanbul ignore next */\nfunction publishAction( ...args ) {\n\t/* eslint-disable no-console */\n\tif ( console && typeof console.log === \"function\" ) {\n\t\tconsole.log( \"lux.publishAction has been deprecated and will be removed in future releases. Please use lux.dispatch.\" );\n\t}\n\t/* eslint-enable no-console */\n\tdispatch( ...args );\n}\n\nimport { Store, stores, removeStore } from \"./store\";\n\nimport dispatcher from \"./dispatcher\";\n\nexport default {\n\tactions,\n\tcustomActionCreator,\n\tdispatch,\n\tpublishAction,\n\tdispatcher,\n\tgetActionGroup,\n\tactionCreatorListener,\n\tactionCreator,\n\tactionListener,\n\tmixin,\n\treactMixin,\n\tremoveStore,\n\tStore,\n\tstores,\n\tutils,\n\tluxWrapper\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// NOTE - these will eventually live in their own add-on lib or in a debug build of lux\n\n/* eslint  \"no-console\":\"off\" */\n\nimport { actions, getGroupsWithAction } from \"./actions\";\nimport dispatcher from \"./dispatcher\";\n\nexport function printActions() {\n\tconst actionList = Object.keys( actions )\n\t\t.map( function( x ) {\n\t\t\treturn {\n\t\t\t\t\"action name\": x,\n\t\t\t\tstores: dispatcher.getStoresHandling( x ).stores.map( function( s ) {\n\t\t\t\t\treturn s.namespace;\n\t\t\t\t} ).join( \",\" ),\n\t\t\t\tgroups: getGroupsWithAction( x ).join( \",\" )\n\t\t\t};\n\t\t} );\n\tif ( console && console.table ) {\n\t\tconsole.group( \"Currently Recognized Actions\" );\n\t\tconsole.table( actionList );\n\t\tconsole.groupEnd();\n\t} else if ( console && console.log ) {\n\t\tconsole.log( actionList );\n\t}\n}\n\nexport function printStoreDepTree( actionType ) {\n\tlet tree = [];\n\tactionType = typeof actionType === \"string\" ? [ actionType ] : actionType;\n\tif ( !actionType ) {\n\t\tactionType = Object.keys( actions );\n\t}\n\tactionType.forEach( function( at ) {\n\t\tdispatcher.getStoresHandling( at )\n\t\t\t.generations.forEach( function( x ) {\n\t\t\t\twhile ( x.length ) {\n\t\t\t\t\tconst t = x.pop();\n\t\t\t\t\ttree.push( {\n\t\t\t\t\t\t\"action type\": at,\n\t\t\t\t\t\t\"store namespace\": t.namespace,\n\t\t\t\t\t\t\"waits for\": t.waitFor.join( \",\" ),\n\t\t\t\t\t\tgeneration: t.gen\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\tif ( console && console.table ) {\n\t\t\tconsole.group( `Store Dependency List for ${ at }` );\n\t\t\tconsole.table( tree );\n\t\t\tconsole.groupEnd();\n\t\t} else if ( console && console.log ) {\n\t\t\tconsole.log( `Store Dependency List for ${ at }:` );\n\t\t\tconsole.log( tree );\n\t\t}\n\t\ttree = [];\n\t} );\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__10__;","module.exports = __WEBPACK_EXTERNAL_MODULE__11__;","// **********************************************\n// *                 Store Mixin                *\n// **********************************************\n\nimport { storeChannel, dispatcherChannel } from \"../bus\";\nimport { ensureLuxProp, entries } from \"../utils\";\n\nfunction gateKeeper( instance, store ) {\n\tconst payload = {};\n\tpayload[ store ] = true;\n\tconst __lux = instance.__lux;\n\n\tconst found = __lux.waitFor.indexOf( store );\n\n\tif ( found > -1 ) {\n\t\t__lux.waitFor.splice( found, 1 );\n\t\t__lux.heardFrom.push( payload );\n\n\t\tif ( __lux.waitFor.length === 0 ) {\n\t\t\t__lux.heardFrom = [];\n\t\t\tinstance.stores.onChange.call( instance, payload );\n\t\t}\n\t}\n}\n\nfunction handlePreNotify( instance, data ) {\n\tinstance.__lux.waitFor = data.stores.filter(\n\t\titem => instance.stores.listenTo.indexOf( item ) > -1\n\t);\n}\n\nexport const storeMixin = {\n\tsetup() {\n\t\tconst __lux = ensureLuxProp( this );\n\t\tconst stores = this.stores;\n\t\tif ( !stores ) {\n\t\t\tthrow new Error( \"Your component must provide a \\\"stores\\\" key\" );\n\t\t}\n\n\t\tif ( !stores.listenTo || !stores.listenTo.length ) {\n\t\t\tthrow new Error( \"listenTo must contain at least one store namespace\" );\n\t\t}\n\n\t\tconst listenTo = typeof stores.listenTo === \"string\" ? [ stores.listenTo ] : stores.listenTo;\n\n\t\tif ( !stores.onChange ) {\n\t\t\tthrow new Error( `A component was told to listen to the following store(s): ${ listenTo } but no onChange handler was implemented` );\n\t\t}\n\n\t\t__lux.waitFor = [];\n\t\t__lux.heardFrom = [];\n\n\t\tlistenTo.forEach( store => {\n\t\t\t__lux.subscriptions[ `${ store }.changed` ] = storeChannel.subscribe( `${ store }.changed`, () => gateKeeper( this, store ) );\n\t\t} );\n\n\t\t__lux.subscriptions.prenotify = dispatcherChannel.subscribe( \"prenotify\", data => handlePreNotify( this, data ) );\n\t},\n\tteardown() {\n\t\tfor ( const [ key, sub ] of entries( this.__lux.subscriptions ) ) {\n\t\t\tlet split;\n\t\t\t// eslint-disable-next-line no-cond-assign\n\t\t\tif ( key === \"prenotify\" || ( ( split = key.split( \".\" ) ) && split.pop() === \"changed\" ) ) {\n\t\t\t\tsub.unsubscribe();\n\t\t\t}\n\t\t}\n\t},\n\tmixin: {}\n};\n\nexport const storeReactMixin = {\n\tcomponentWillMount: storeMixin.setup,\n\tcomponentWillUnmount: storeMixin.teardown\n};\n\n","// **********************************************\n// *            Action Listener Mixin           *\n// **********************************************\n\nimport { actionChannel } from \"../bus\";\nimport { ensureLuxProp } from \"../utils\";\nimport { generateActionCreator, addToActionGroup } from \"../actions\";\n\nexport function actionListenerMixin( { handlers, handlerFn, context, channel, topic } = {} ) {\n\treturn {\n\t\tsetup() {\n\t\t\tcontext = context || this;\n\t\t\tconst __lux = ensureLuxProp( context );\n\t\t\tconst subs = __lux.subscriptions;\n\t\t\thandlers = handlers || context.handlers;\n\t\t\tchannel = channel || actionChannel;\n\t\t\ttopic = topic || \"execute.*\";\n\t\t\thandlerFn = handlerFn || ( data => {\n\t\t\t\tconst handler = handlers[ data.actionType ];\n\t\t\t\tif ( handler ) {\n\t\t\t\t\thandler.apply( context, data.actionArgs );\n\t\t\t\t}\n\t\t\t} );\n\t\t\tif ( !handlers || !Object.keys( handlers ).length ) {\n\t\t\t\tthrow new Error( \"You must have at least one action handler in the handlers property\" );\n\t\t\t} else if ( subs && subs.actionListener ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsubs.actionListener = channel.subscribe( topic, handlerFn ).context( context );\n\t\t\tconst handlerKeys = Object.keys( handlers );\n\t\t\tgenerateActionCreator( handlerKeys );\n\t\t\tif ( context.namespace ) {\n\t\t\t\taddToActionGroup( context.namespace, handlerKeys );\n\t\t\t}\n\t\t},\n\t\tteardown() {\n\t\t\tthis.__lux.subscriptions.actionListener.unsubscribe();\n\t\t}\n\t};\n}\n","// **********************************************\n// *   Generalized Mixin Behavior for non-lux   *\n// **********************************************\n\nimport React from \"react\";\nimport { setupStoreListener, setupActionMap } from \"./wrapperUtils\";\nimport { entries } from \"../utils\";\n\nexport default function luxWrapper( Component, {\n\tactions,\n\tstores,\n\tgetState,\n\tpureComponent = false,\n\tcomponentWillMount,\n\tcomponentDidMount,\n\tcomponentWillReceiveProps,\n\tcomponentWillUpdate,\n\tcomponentDidUpdate,\n\tcomponentWillUnmount\n} ) {\n\tfunction getComponentState( instance, props ) {\n\t\tconst initialPayload = ( stores || [] ).reduce( ( m, s ) => {\n\t\t\tm[ s ] = true;\n\t\t\treturn m;\n\t\t}, {} );\n\t\treturn getState( props, initialPayload );\n\t}\n\n\tclass LuxWrapper extends React[ pureComponent ? \"PureComponent\" : \"Component\" ] {\n\t\tconstructor( props, context ) {\n\t\t\tsuper( props, context );\n\t\t\tsetupStoreListener( this, { stores, getState } );\n\t\t\tsetupActionMap( this, { actions } );\n\t\t\tif ( getState ) {\n\t\t\t\tthis.state = getComponentState( this, props );\n\t\t\t}\n\t\t}\n\n\t\t// eslint-disable-next-line camelcase\n\t\tUNSAFE_componentWillMount( ...args ) {\n\t\t\tif ( componentWillMount ) {\n\t\t\t\tcomponentWillMount.apply( this, args );\n\t\t\t}\n\t\t}\n\n\t\tcomponentDidMount( ...args ) {\n\t\t\tif ( componentDidMount ) {\n\t\t\t\tcomponentDidMount.apply( this, args );\n\t\t\t}\n\t\t}\n\n\t\t// eslint-disable-next-line camelcase\n\t\tUNSAFE_componentWillReceiveProps( ...args ) {\n\t\t\tif ( getState ) {\n\t\t\t\tthis.setState( getComponentState( this, ...args ) );\n\t\t\t}\n\t\t\tif ( componentWillReceiveProps ) {\n\t\t\t\tcomponentWillReceiveProps.apply( this, args );\n\t\t\t}\n\t\t}\n\n\t\t// eslint-disable-next-line camelcase\n\t\tUNSAFE_componentWillUpdate( ...args ) {\n\t\t\tif ( componentWillUpdate ) {\n\t\t\t\tcomponentWillUpdate.apply( this, args );\n\t\t\t}\n\t\t}\n\n\t\tcomponentDidUpdate( ...args ) {\n\t\t\tif ( componentDidUpdate ) {\n\t\t\t\tcomponentDidUpdate.apply( this, args );\n\t\t\t}\n\t\t}\n\n\t\tcomponentWillUnmount( ...args ) {\n\t\t\tif ( componentWillUnmount ) {\n\t\t\t\tcomponentWillUnmount.apply( this, args );\n\t\t\t}\n\t\t\tfor ( const [ key, sub ] of entries( this.__lux.subscriptions ) ) {\n\t\t\t\tlet split;\n\t\t\t\t// eslint-disable-next-line no-cond-assign\n\t\t\t\tif ( key === \"prenotify\" || ( ( split = key.split( \".\" ) ) && split.pop() === \"changed\" ) ) {\n\t\t\t\t\tsub.unsubscribe();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\trender() {\n\t\t\treturn React.createElement(\n\t\t\t\tComponent,\n\t\t\t\tObject.assign(\n\t\t\t\t\t{},\n\t\t\t\t\tthis.props,\n\t\t\t\t\tthis.propToAction,\n\t\t\t\t\tthis.state\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tLuxWrapper.displayName = `LuxWrapped(${ Component.displayName || \"Component\" })`;\n\n\treturn LuxWrapper;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__15__;","// **********************************************\n// *   wrapper utilities                        *\n// **********************************************\n\nimport { ensureLuxProp, entries } from \"../utils\";\nimport { storeChannel, dispatcherChannel } from \"../bus\";\nimport { dispatch } from \"./actionCreator\";\nimport { isString, isFunction } from \"lodash\";\n\nexport function gateKeeper( instance, { getState }, store ) {\n\tconst payload = {};\n\tpayload[ store ] = true;\n\tconst __lux = instance.__lux;\n\n\tconst found = __lux.waitFor.indexOf( store );\n\n\tif ( found > -1 ) {\n\t\t__lux.waitFor.splice( found, 1 );\n\t\t__lux.heardFrom.push( payload );\n\n\t\tif ( __lux.waitFor.length === 0 ) {\n\t\t\t__lux.heardFrom = [];\n\t\t\tinstance.setState( getState( instance.props, payload ) );\n\t\t}\n\t}\n}\n\nexport function handlePreNotify( instance, stores, data ) {\n\tinstance.__lux.waitFor = data.stores.filter(\n\t\titem => stores.indexOf( item ) > -1\n\t);\n}\n\nexport function setupStoreListener( instance, { stores, getState } ) {\n\tconst __lux = ensureLuxProp( instance );\n\t__lux.waitFor = [];\n\t__lux.heardFrom = [];\n\n\tif ( stores && stores.length ) {\n\t\tstores.forEach( store => {\n\t\t\t__lux.subscriptions[ `${ store }.changed` ] = storeChannel.subscribe(\n\t\t\t\t`${ store }.changed`,\n\t\t\t\t() => gateKeeper( instance, { getState }, store )\n\t\t\t);\n\t\t} );\n\n\t\t__lux.subscriptions.prenotify = dispatcherChannel.subscribe(\n\t\t\t\"prenotify\",\n\t\t\tdata => handlePreNotify( instance, stores, data )\n\t\t);\n\t}\n}\n\nexport function isSyntheticEvent( e ) {\n\treturn e.hasOwnProperty( \"eventPhase\" ) &&\n\t\te.hasOwnProperty( \"nativeEvent\" ) &&\n\t\te.hasOwnProperty( \"target\" ) &&\n\t\te.hasOwnProperty( \"type\" );\n}\n\nexport function getDefaultActionCreator( action ) {\n\tif ( Object.prototype.toString.call( action ) === \"[object String]\" ) {\n\t\treturn function( e, ...args ) {\n\t\t\tif ( !isSyntheticEvent( e ) ) {\n\t\t\t\targs.unshift( e );\n\t\t\t}\n\t\t\tdispatch( action, ...args );\n\t\t};\n\t}\n\treturn undefined;\n}\n\nexport function setupActionMap( instance, { actions } ) {\n\tinstance.propToAction = {};\n\tfor ( const [ childProp, action ] of entries( actions || {} ) ) {\n\t\tlet actionCreator = action; // assumes function by default\n\t\tif ( isString( action ) ) {\n\t\t\tactionCreator = getDefaultActionCreator( action );\n\t\t} else if ( !isFunction( action ) ) {\n\t\t\tthrow new Error( \"The values provided to the luxWrapper actions parameter must be a string or a function\" );\n\t\t}\n\t\tinstance.propToAction[ childProp ] = actionCreator;\n\t}\n}\n","import { storeChannel, dispatcherChannel } from \"./bus\";\nimport { entries } from \"./utils\";\nimport dispatcher from \"./dispatcher\";\nimport _ from \"lodash\";\nimport { mixin } from \"./mixins\";\n\nexport const stores = {};\n\nfunction buildActionList( handlers ) {\n\tconst actionList = [];\n\tfor ( const [ key, handler ] of entries( handlers ) ) {\n\t\tactionList.push( {\n\t\t\tactionType: key,\n\t\t\twaitFor: handler.waitFor || []\n\t\t} );\n\t}\n\treturn actionList;\n}\n\nfunction ensureStoreOptions( options, handlers, store ) {\n\tconst namespace = ( options && options.namespace ) || store.namespace;\n\tif ( namespace in stores ) {\n\t\tthrow new Error( `The store namespace \"${ namespace }\" already exists.` );\n\t}\n\tif ( !namespace ) {\n\t\tthrow new Error( \"A lux store must have a namespace value provided\" );\n\t}\n\tif ( !handlers || !Object.keys( handlers ).length ) {\n\t\tthrow new Error( \"A lux store must have action handler methods provided\" );\n\t}\n}\n\nfunction getHandlerObject( key, listeners ) {\n\treturn {\n\t\twaitFor: [],\n\t\thandler() {\n\t\t\tlet changed = 0;\n\t\t\tconst args = Array.from( arguments );\n\t\t\tlisteners[ key ].forEach( function( listener ) {\n\t\t\t\tchanged += ( listener.apply( this, args ) === false ? 0 : 1 );\n\t\t\t}.bind( this ) );\n\t\t\treturn changed > 0;\n\t\t}\n\t};\n}\n\nfunction updateWaitFor( source, handlerObject ) {\n\tif ( source.waitFor ) {\n\t\tsource.waitFor.forEach( function( dep ) {\n\t\t\tif ( handlerObject.waitFor.indexOf( dep ) === -1 ) {\n\t\t\t\thandlerObject.waitFor.push( dep );\n\t\t\t}\n\t\t} );\n\t}\n}\n\nfunction addListeners( listeners, key, handler ) {\n\tlisteners[ key ] = listeners[ key ] || [];\n\tlisteners[ key ].push( handler.handler || handler );\n}\n\nfunction processStoreArgs( ...options ) {\n\tconst listeners = {};\n\tconst handlers = {};\n\tconst state = {};\n\tconst otherOpts = {};\n\toptions.forEach( function( o ) {\n\t\tlet opt;\n\t\tif ( o ) {\n\t\t\topt = _.clone( o );\n\t\t\t_.merge( state, opt.state );\n\t\t\tif ( opt.handlers ) {\n\t\t\t\tObject.keys( opt.handlers ).forEach( function( key ) {\n\t\t\t\t\tconst handler = opt.handlers[ key ];\n\t\t\t\t\t// set up the actual handler method that will be executed\n\t\t\t\t\t// as the store handles a dispatched action\n\t\t\t\t\thandlers[ key ] = handlers[ key ] || getHandlerObject( key, listeners );\n\t\t\t\t\t// ensure that the handler definition has a list of all stores\n\t\t\t\t\t// being waited upon\n\t\t\t\t\tupdateWaitFor( handler, handlers[ key ] );\n\t\t\t\t\t// Add the original handler method(s) to the listeners queue\n\t\t\t\t\taddListeners( listeners, key, handler );\n\t\t\t\t} );\n\t\t\t}\n\t\t\tdelete opt.handlers;\n\t\t\tdelete opt.state;\n\t\t\t_.merge( otherOpts, opt );\n\t\t}\n\t} );\n\treturn [ state, handlers, otherOpts ];\n}\n\nexport class Store {\n\tconstructor( ...opt ) {\n\t\tlet [ state, handlers, options ] = processStoreArgs( ...opt ); // eslint-disable-line prefer-const\n\t\tensureStoreOptions( options, handlers, this );\n\t\tconst namespace = options.namespace;\n\t\tObject.assign( this, options );\n\t\tstores[ namespace ] = this;\n\t\tlet inDispatch = false;\n\t\tthis.hasChanged = false;\n\n\t\tthis.getState = function() {\n\t\t\treturn state;\n\t\t};\n\n\t\tthis.setState = function( newState ) {\n\t\t\tif ( !inDispatch ) {\n\t\t\t\tthrow new Error( \"setState can only be called during a dispatch cycle from a store action handler.\" );\n\t\t\t}\n\t\t\tstate = Object.assign( state, newState );\n\t\t};\n\n\t\tthis.replaceState = function( newState ) {\n\t\t\tif ( !inDispatch ) {\n\t\t\t\tthrow new Error( \"replaceState can only be called during a dispatch cycle from a store action handler.\" );\n\t\t\t}\n\t\t\t// we preserve the underlying state ref, but clear it\n\t\t\tObject.keys( state ).forEach( function( key ) {\n\t\t\t\tdelete state[ key ];\n\t\t\t} );\n\t\t\tstate = Object.assign( state, newState );\n\t\t};\n\n\t\tthis.flush = function flush() {\n\t\t\tinDispatch = false;\n\t\t\tif ( this.hasChanged ) {\n\t\t\t\tthis.hasChanged = false;\n\t\t\t\tstoreChannel.publish( `${ this.namespace }.changed` );\n\t\t\t}\n\t\t};\n\n\t\tmixin( this, mixin.actionListener( {\n\t\t\tcontext: this,\n\t\t\tchannel: dispatcherChannel,\n\t\t\ttopic: `${ namespace }.handle.*`,\n\t\t\thandlers,\n\t\t\thandlerFn: function( data ) {\n\t\t\t\tif ( handlers.hasOwnProperty( data.actionType ) ) {\n\t\t\t\t\tinDispatch = true;\n\t\t\t\t\tconst res = handlers[ data.actionType ].handler.apply( this, data.actionArgs.concat( data.deps ) );\n\t\t\t\t\tthis.hasChanged = !( res === false );\n\t\t\t\t\tdispatcherChannel.publish(\n\t\t\t\t\t\t`${ this.namespace }.handled.${ data.actionType }`,\n\t\t\t\t\t\t{ hasChanged: this.hasChanged, namespace: this.namespace }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}.bind( this )\n\t\t} ) );\n\n\t\tthis.__subscription = {\n\t\t\tnotify: dispatcherChannel.subscribe( \"notify\", () => this.flush() )\n\t\t\t\t.constraint( () => inDispatch )\n\t\t};\n\n\t\tdispatcher.registerStore(\n\t\t\t{\n\t\t\t\tnamespace,\n\t\t\t\tactions: buildActionList( handlers )\n\t\t\t}\n\t\t);\n\t}\n\n\t// Need to build in behavior to remove this store\n\t// from the dispatcher's actionMap as well!\n\tdispose() {\n\t\t/*eslint-disable */\n\t\tfor ( let [ k, subscription ] of entries( this.__subscription ) ) {\n\t\t\tsubscription.unsubscribe();\n\t\t}\n\t\t/* eslint-enable */\n\t\tdelete stores[ this.namespace ];\n\t\tdispatcher.removeStore( this.namespace );\n\t\tthis.luxCleanup();\n\t}\n}\n\nexport function removeStore( namespace ) {\n\tstores[ namespace ].dispose();\n}\n"],"sourceRoot":""}